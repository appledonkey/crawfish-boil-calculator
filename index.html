<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Calculate ingredients and equipment for the perfect crawfish boil. Get pricing estimates and shopping lists for any party size.">
    <meta name="keywords" content="crawfish boil calculator, crawfish ingredients, party planning, Louisiana crawfish, Viet-Cajun">
    <title>Crawfish Boil Calculator - Plan Your Perfect Crawfish Boil</title>
    
    <!-- Warning suppression MUST come first, before any other scripts -->
    <script>
        // Patch console.warn immediately to catch Tailwind's warning
        (function() {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                const message = args.join(' ');
                // Block specific warnings
                if (message.includes('cdn.tailwindcss.com should not be used in production') ||
                    message.includes('tailwindcss.com/docs/installation') ||
                    message.includes('should not be used in production') ||
                    message.includes('in-browser Babel transformer') ||
                    message.includes('precompile your scripts') ||
                    message.includes('babeljs.io/docs/setup') ||
                    message.includes('Download the React DevTools')) {
                    return;
                }
                originalWarn.apply(console, args);
            };
        })();
    </script>
    
    <!-- Use production React builds to eliminate development warnings -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Use minified Babel for production -->
    <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
    
    <!-- Tailwind CSS - warning now suppressed above -->
    <script src="https://cdn.tailwindcss.com?v=3.4.0"></script>
    <script>
        // Configure Tailwind
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'display': ['Bungee', 'cursive'],
                        'body': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            },
            corePlugins: {
                preflight: true,
            }
        }
        
        // Comprehensive warning suppression for clean console
        if (typeof console !== 'undefined') {
            const originalWarn = console.warn;
            const originalLog = console.log;
            const originalError = console.error;
            
            console.warn = function(...args) {
                const message = args.join(' ');
                // Filter out all known development/build warnings
                if (message.includes('Download the React DevTools') ||
                    message.includes('development build') ||
                    message.includes('Tailwind CSS') ||
                    message.includes('babel-standalone') ||
                    message.includes('@babel/standalone') ||
                    message.includes('Consider adding') ||
                    message.includes('cdn.tailwindcss.com') ||
                    message.includes('should not be used in production') ||
                    message.includes('in-browser Babel transformer') ||
                    message.includes('precompile your scripts') ||
                    message.includes('babeljs.io/docs/setup') ||
                    message.includes('tailwindcss.com/docs/installation') ||
                    message.includes('Warning:') && message.includes('ReactDOM.render')) {
                    return;
                }
                originalWarn.apply(console, args);
            };
            
            console.log = function(...args) {
                const message = args.join(' ');
                // Filter out Babel compilation logs and Tailwind messages
                if (message.includes('Babel') ||
                    message.includes('Transform') ||
                    message.includes('[CrawfishBoilCalculator] tests passed') ||
                    message.includes('Tailwind CSS')) {
                    return;
                }
                originalLog.apply(console, args);
            };
            
            console.error = function(...args) {
                const message = args.join(' ');
                // Filter out CORS errors for local development
                if (message.includes('CORS policy') ||
                    message.includes('Cross origin requests') ||
                    message.includes('Failed to load resource') ||
                    message.includes('net::ERR_FAILED')) {
                    return;
                }
                originalError.apply(console, args);
            };
        }
    </script>
</head>
<body style="margin: 0; padding: 0; background: #0b0b0b;">
    <div id="root"></div>
    
    <!-- Component is already defined inline below -->
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Add CSS.supports check for color-mix and provide fallbacks
        const supportsColorMix = CSS && CSS.supports && CSS.supports('background-color', 'color-mix(in srgb, red, blue)');
        
        // Helper function to replace color-mix with fallback
        const colorMixFallback = (colorMixString) => {
          if (supportsColorMix) return colorMixString;
          
          // Simple fallbacks for common color-mix patterns
          if (colorMixString.includes('var(--spice) 85%, white')) return 'rgba(255, 68, 0, 0.85)';
          if (colorMixString.includes('var(--spice) 40%, transparent')) return 'rgba(255, 68, 0, 0.4)';
          if (colorMixString.includes('var(--spice) 60%, transparent')) return 'rgba(255, 68, 0, 0.6)';
          if (colorMixString.includes('var(--spice) 35%, transparent')) return 'rgba(255, 68, 0, 0.35)';
          if (colorMixString.includes('var(--spice) 20%, transparent')) return 'rgba(255, 68, 0, 0.2)';
          if (colorMixString.includes('var(--spice) 18%, transparent')) return 'rgba(255, 68, 0, 0.18)';
          if (colorMixString.includes('var(--spice) 15%, transparent')) return 'rgba(255, 68, 0, 0.15)';
          
          // Default fallback
          return 'rgba(255, 68, 0, 0.3)';
        };
        
        // Mock UI components
        const Card = ({ children, className = "", ...props }) => 
            React.createElement('div', { className, ...props }, children);
        const CardContent = ({ children }) => React.createElement('div', {}, children);
        const Button = ({ children, className = "", ...props }) => 
            React.createElement('button', { className, ...props }, children);

        // Component will be imported from crawfish_calculator_react.jsx

        const CONFIG = {
          boilStyles: {
            cajun: { name: 'Cajun Style' },
            vietcajun: { name: 'Viet-Cajun Style' },
            texorleans: { name: 'Tex-Orleans Style' }
          },
          regionalPricing: {
            louisiana: {
              crawfish: 2.75,      // per lb - live crawfish
              onions: 0.60,        // per onion
              lemons: 0.40,        // per lemon
              limes: 0.45,         // per lime
              lemonJuice: 0.15,    // per oz
              vinegar: 0.10,       // per oz
              salt: 0.80,          // per lb
              cajunSeasoning: 0.25, // per oz
              redPotatoes: 1.25,   // per lb
              corn: 0.60,          // per ear
              garlic: 0.12,        // per oz
              ginger: 0.20,        // per oz
              lemongrass: 0.30,    // per stalk
              sausage: 4.50        // per lb
            },
            texas: {
              crawfish: 4.50,      // per lb - live crawfish (higher due to shipping)
              onions: 0.75,        // per onion
              lemons: 0.50,        // per lemon
              limes: 0.55,         // per lime
              lemonJuice: 0.20,    // per oz
              vinegar: 0.12,       // per oz
              salt: 1.00,          // per lb
              cajunSeasoning: 0.35, // per oz
              redPotatoes: 1.75,   // per lb
              corn: 0.75,          // per ear
              garlic: 0.15,        // per oz
              ginger: 0.25,        // per oz
              lemongrass: 0.35,    // per stalk
              sausage: 6.50        // per lb
            },
            other: {
              crawfish: 3.75,      // per lb - live crawfish
              onions: 0.65,        // per onion
              lemons: 0.45,        // per lemon
              limes: 0.50,         // per lime
              lemonJuice: 0.18,    // per oz
              vinegar: 0.11,       // per oz
              salt: 0.90,          // per lb
              cajunSeasoning: 0.30, // per oz
              redPotatoes: 1.50,   // per lb
              corn: 0.65,          // per ear
              garlic: 0.13,        // per oz
              ginger: 0.22,        // per oz
              lemongrass: 0.32,    // per stalk
              sausage: 5.75        // per lb
            }
          },
          spiceLevels: {
            1: { name: 'Mild' },
            2: { name: 'Medium' },
            3: { name: 'Hot' },
            4: { name: 'Extra Hot' },
            5: { name: 'Inferno' }
          }
        };




        // Helper function to determine appropriate equipment size based on crawfish pounds
        const getEquipmentSize = (crawfishLbs) => {
          if (crawfishLbs <= 30) {
            return {
              burnerSize: 'Small Crawfish Boiler Kit (30-40qt pot)',
              burnerPrice: 85.00,
              propaneTanks: 1,
              capacity: '4-8 people',
              searchTerm: 'crawfish boil burner pot kit 30 quart'
            };
          } else if (crawfishLbs <= 60) {
            return {
              burnerSize: 'Medium Crawfish Boiler Kit (60-80qt pot)',  
              burnerPrice: 150.00,
              propaneTanks: 2,
              capacity: '8-20 people',
              searchTerm: 'crawfish boil burner pot kit 60 quart'
            };
          } else {
            return {
              burnerSize: 'Large Commercial Crawfish Boiler Kit (100qt+ pot)',
              burnerPrice: 250.00,
              propaneTanks: 3,
              capacity: '20+ people',
              searchTerm: 'commercial crawfish boil burner pot kit 100 quart'
            };
          }
        };


        // Dynamic color map for spice level (1..5)
        const SPICE_COLORS = {
          1: '#66BB6A', // mild: green 400
          2: '#FFB300', // medium: vivid amber  
          3: '#FF7043', // hot: deep orange
          4: '#D32F2F', // extra hot: red 700
          5: '#8B0040'  // inferno: dark red with purple hue
        };


        // Advanced mode comprehensive party checklist with pricing
        const ADVANCED_ITEMS = {
          cajun: {
            // === FOOD & INGREDIENTS ===
            'must-have': {
              title: 'Boil Essentials',
              items: [
                { name: 'Live Crawfish', unit: 'lbs', ratio: 'peopleCount * lbsPerPerson', min: 35, priceKey: 'crawfish' },
                { name: 'Smoked Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.15', min: 1, priceKey: 'sausage' },
                { name: 'Andouille Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.1', min: 1, priceKey: 'sausage' },
                { name: 'Crawfish Boil Dry Seasoning', unit: 'oz', ratio: 'crawfishLbs * 1.6', min: 8, priceKey: 'cajunSeasoning' },
                { name: 'Salt', unit: 'lbs', ratio: 'crawfishLbs * 0.1', min: 1, priceKey: 'salt' },
                { name: 'Lemon Juice', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 16, price: 0.20 },
                { name: 'White Vinegar', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1.5)', min: 16, price: 0.15 },
                { name: 'Corn on the Cob', unit: 'ears', ratio: 'peopleCount * 3', min: 12, priceKey: 'corn' },
                { name: 'Red Potatoes', unit: 'lbs', ratio: 'crawfishLbs * 0.4', min: 2, priceKey: 'redPotatoes' },
                { name: 'Yellow Onions', unit: 'lbs', ratio: 'crawfishLbs * 0.15', min: 1, priceKey: 'onions' },
                { name: 'Garlic', unit: 'heads', ratio: 'Math.ceil(crawfishLbs / 10)', min: 2, price: 0.75 },
                { name: 'Lemons', unit: 'count', ratio: 'Math.ceil(peopleCount / 2)', min: 3, priceKey: 'lemons' }
              ]
            },
            'seasonings': {
              title: 'Seasonings & Aromatics',
              items: [
                { name: 'Bay Leaves', unit: 'oz', ratio: 'Math.ceil(crawfishLbs / 20)', min: 1, price: 2.50, amazonSearch: 'crawfish boil bay leaves' },
                { name: 'Butter (for serving)', unit: 'lbs', ratio: 'peopleCount * 0.15', min: 1, price: 6.00 },
                { name: 'Cajun Seasoning (Table)', unit: 'oz', ratio: 'peopleCount * 0.5', min: 4, priceKey: 'cajunSeasoning', amazonSearch: 'crawfish boil seasoning' },
                { name: 'Liquid Boil Concentrate', unit: 'oz', ratio: 'Math.ceil(crawfishLbs * 4)', min: 32, price: 0.20, amazonSearch: 'crawfish boil liquid concentrate' },
                { name: 'Oranges', unit: 'count', ratio: 'Math.ceil(peopleCount / 2)', min: 2, price: 0.75 }
              ]
            },
            'proteins-seafood': {
              title: 'Proteins & Seafood',
              items: [
                { name: 'Blue Crab or Snow Crab', unit: 'lbs', ratio: 'peopleCount * 0.25', min: 2, price: 18.00 },
                { name: 'Boudin Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.08', min: 1, priceKey: 'sausage' },
                { name: 'Mussels', unit: 'lbs', ratio: 'peopleCount * 0.3', min: 2, price: 8.50 },
                { name: 'Shrimp (Medium-Large)', unit: 'lbs', ratio: 'peopleCount * 0.4', min: 2, price: 12.00 }
              ]
            },
            'vegetables': {
              title: 'Vegetables',
              items: [
                { name: 'Artichoke Hearts', unit: 'count', ratio: 'Math.ceil(peopleCount / 4)', min: 2, price: 1.25 },
                { name: 'Button Mushrooms', unit: 'lbs', ratio: 'peopleCount * 0.2', min: 1, price: 4.50 },
                { name: 'Celery', unit: 'bunches', ratio: 'Math.ceil(peopleCount / 8)', min: 1, price: 2.50 },
                { name: 'Green Beans', unit: 'lbs', ratio: 'peopleCount * 0.15', min: 1, price: 3.50 }
              ]
            },
            
            // === EQUIPMENT & SUPPLIES ===
            'equipment-tools': {
              title: 'Cooking Equipment & Tools',
              items: [
                { name: 'Crawfish Tongs', unit: 'pairs', ratio: 'Math.ceil(peopleCount / 10)', min: 2, price: 12.00, amazonSearch: 'crawfish tongs seafood' },
                { name: 'Crawfish Washer/Basket', unit: 'count', ratio: 'Math.ceil(crawfishLbs / 40)', min: 1, price: 55.00, amazonSearch: 'crawfish washing machine basket seafood cleaner' },
                { name: 'Crawfish Boiler Kit (Size Auto-Selected)', unit: 'set', ratio: '1', min: 1, price: 150.00, isDynamic: true, amazonSearch: 'crawfish boil kit burner pot' },
                { name: 'Fire Extinguisher', unit: 'count', ratio: '1', min: 1, price: 35.00, amazonSearch: 'fire extinguisher kitchen' },
                { name: 'Heat-resistant Gloves', unit: 'pairs', ratio: 'Math.ceil(crawfishLbs / 30)', min: 2, price: 15.00, amazonSearch: 'heat resistant gloves crawfish boil' },
                { name: 'Hose with Spray Nozzle', unit: 'count', ratio: '1', min: 1, price: 45.00, amazonSearch: 'hose spray nozzle' },
                { name: 'Long Mesh Skimmer', unit: 'count', ratio: 'Math.ceil(crawfishLbs / 35)', min: 1, price: 18.00, amazonSearch: 'long handle mesh skimmer strainer crawfish boil' },
                { name: 'Long-handled Paddle', unit: 'count', ratio: 'Math.ceil(crawfishLbs / 40)', min: 1, price: 30.00, amazonSearch: 'crawfish boil paddle stirring' },
                { name: 'Propane Tank (20lb)', unit: '', ratio: 'DYNAMIC_PROPANE_TANKS', min: 1, price: 55.00, isDynamic: true, amazonSearch: 'propane tank 20lb outdoor cooking' }
              ]
            },
            'serving-party-setup': {
              title: 'Serving & Party Setup',
              items: [
                { name: 'Butter Cups or Dipping Cups', unit: '', ratio: 'peopleCount * 2', min: 10, price: 0.10, amazonSearch: 'dipping cups sauce containers disposable' },
                { name: 'Coolers (Food & Beverage Storage)', unit: 'count', ratio: 'Math.ceil(peopleCount / 12)', min: 3, price: 75.00, amazonSearch: 'cooler ice chest outdoor party' },
                { name: 'Disposable Cups', unit: '', ratio: 'peopleCount * 4', min: 20, price: 0.08, amazonSearch: 'disposable cups party plastic' },
                { name: 'Extension Cords', unit: 'count', ratio: 'Math.ceil(peopleCount / 30)', min: 2, price: 35.00, amazonSearch: 'heavy duty extension cord outdoor' },
                { name: 'Folding Chairs', unit: 'count', ratio: 'peopleCount * 1.1', min: 8, price: 35.00, amazonSearch: 'folding chairs outdoor' },
                { name: 'Folding Tables', unit: 'count', ratio: 'Math.ceil(peopleCount / 10)', min: 2, price: 95.00, amazonSearch: 'folding table outdoor' },
                { name: 'Napkins', unit: 'packs', ratio: 'Math.ceil(peopleCount / 15)', min: 3, price: 4.00, amazonSearch: 'party napkins disposable' },
                { name: 'Paper or Plastic Plates', unit: '', ratio: 'peopleCount * 3', min: 10, price: 0.15, amazonSearch: 'disposable paper plates party' },
                { name: 'Paper Towels', unit: 'rolls', ratio: 'Math.ceil(peopleCount / 8)', min: 4, price: 2.50, amazonSearch: 'paper towels rolls party' },
                { name: 'Plastic Utensils', unit: '', ratio: 'peopleCount * 1.5', min: 10, price: 0.25, amazonSearch: 'disposable plastic utensils party' },
                { name: 'Shade Tents/Canopies', unit: 'count', ratio: 'Math.ceil(peopleCount / 20)', min: 1, price: 120.00, amazonSearch: 'pop up canopy tent' },
                { name: 'Table Covers/Butcher Paper', unit: 'rolls', ratio: 'Math.ceil(peopleCount / 12)', min: 2, price: 12.00, amazonSearch: 'butcher paper roll' },
                { name: 'To-go Containers or Zip-top Bags', unit: '', ratio: 'Math.ceil(peopleCount / 3)', min: 10, price: 0.75, amazonSearch: 'takeout containers disposable food storage' },
                { name: 'Wet Wipes or Baby Wipes', unit: 'packs', ratio: 'Math.ceil(peopleCount / 6)', min: 3, price: 3.00, amazonSearch: 'wet wipes baby wipes party' }
              ]
            },
            'side-dishes-condiments': {
              title: 'Side Dishes & Condiments',
              items: [
                { name: 'Cocktail Sauce', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1.5)', min: 12, price: 0.45, amazonSearch: 'crawfish boil cocktail sauce' },
                { name: 'Coleslaw', unit: 'lbs', ratio: 'peopleCount * 0.25', min: 2, price: 4.50 },
                { name: 'Extra Garlic Butter', unit: 'lbs', ratio: 'peopleCount * 0.08', min: 1, price: 7.00, amazonSearch: 'crawfish boil garlic butter' },
                { name: 'French Bread/Garlic Bread', unit: 'loaves', ratio: 'Math.ceil(peopleCount / 5)', min: 2, price: 4.50 },
                { name: 'Hot Sauce (Variety)', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 10, price: 0.45, amazonSearch: 'crawfish boil hot sauce' },
                { name: 'Potato Salad', unit: 'lbs', ratio: 'peopleCount * 0.3', min: 2, price: 5.50 },
                { name: 'Remoulade', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1)', min: 8, price: 0.80, amazonSearch: 'crawfish boil remoulade sauce' }
              ]
            },
            'beverages': {
              title: 'Beverages',
              items: [
                { name: 'Beer', unit: 'bottles', ratio: 'peopleCount * 3', min: 12, price: 2.50 },
                { name: 'Bottle Openers', unit: 'count', ratio: 'Math.ceil(peopleCount / 25)', min: 2, price: 8.00 },
                { name: 'Bottled Water', unit: 'bottles', ratio: 'peopleCount * 1.5', min: 12, price: 1.25 },
                { name: 'Hard Seltzer or Cider', unit: 'cans', ratio: 'peopleCount * 1.5', min: 6, price: 3.00 },
                { name: 'Ice', unit: 'bags', ratio: 'Math.ceil(peopleCount / 4)', min: 3, price: 4.50 },
                { name: 'Soft Drinks or Soda', unit: 'cans', ratio: 'peopleCount * 2', min: 12, price: 0.75 },
                { name: 'Spirits or Mixers', unit: 'bottles', ratio: 'Math.ceil(peopleCount / 12)', min: 1, price: 35.00 },
                { name: 'Sweet Tea or Lemonade', unit: 'gallons', ratio: 'Math.ceil(peopleCount / 6)', min: 1, price: 5.00 }
              ]
            },
            'desserts': {
              title: 'Desserts',
              items: [
                { name: 'Bread Pudding', unit: 'servings', ratio: 'peopleCount * 0.8', min: 6, price: 3.00 },
                { name: 'Brownies or Cookies', unit: 'dozen', ratio: 'Math.ceil(peopleCount / 4)', min: 2, price: 8.00 },
                { name: 'Fruit Tray or Fresh Berries', unit: 'trays', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 20.00 },
                { name: 'King Cake', unit: '', ratio: 'Math.ceil(peopleCount / 12)', min: 0, price: 25.00 }
              ]
            },
            'cleanup-waste': {
              title: 'Cleanup & Waste',
              items: [
                { name: 'Cleaning Rags or Towels', unit: 'packs', ratio: 'Math.ceil(peopleCount / 10)', min: 3, price: 3.00, amazonSearch: 'cleaning rags pack outdoor' },
                { name: 'Cleaning Solution', unit: 'oz', ratio: 'peopleCount * 4', min: 32, price: 0.12, amazonSearch: 'bleach cleaning solution outdoor' },
                { name: 'Heavy-duty Trash Bags', unit: 'boxes', ratio: 'Math.ceil(peopleCount / 20)', min: 2, price: 12.00, amazonSearch: 'heavy duty trash bags outdoor' },
                { name: 'Recycling Bins', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 2, price: 20.00, amazonSearch: 'outdoor recycling bin' },
                { name: 'Shell Waste Buckets', unit: '', ratio: 'Math.ceil(peopleCount / 8)', min: 4, price: 12.00, amazonSearch: 'waste bucket seafood shells' },
                { name: 'Table Scrub Brushes', unit: '', ratio: '2', min: 2, price: 8.00, amazonSearch: 'scrub brush cleaning outdoor table' },
                { name: 'Trash Cans', unit: '', ratio: 'Math.ceil(peopleCount / 10)', min: 3, price: 25.00, amazonSearch: 'outdoor trash can with lid' }
              ]
            },
            'comfort-safety': {
              title: 'Comfort & Safety',
              items: [
                { name: 'Bug Spray', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 12, price: 0.50, amazonSearch: 'bug spray insect repellent outdoor' },
                { name: 'Citronella Candles or Torches', unit: '', ratio: 'Math.ceil(peopleCount / 10)', min: 2, price: 8.00, amazonSearch: 'citronella candles outdoor torches' },
                { name: 'First Aid Kit', unit: 'kits', ratio: '1', min: 1, price: 25.00, amazonSearch: 'first aid kit outdoor camping' },
                { name: 'Hand Sanitizer', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1)', min: 8, price: 0.50, amazonSearch: 'hand sanitizer bottles travel size' },
                { name: 'Sunscreen', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 8, price: 1.00, amazonSearch: 'sunscreen spf outdoor sports' }
              ]
            },
            'entertainment-lighting': {
              title: 'Entertainment & Lighting',
              items: [
                { name: 'Beer Pong or Flip Cup Table', unit: '', ratio: 'Math.ceil(peopleCount / 25)', min: 1, price: 60.00, amazonSearch: 'beer pong table folding outdoor' },
                { name: 'Bluetooth Speaker or PA System', unit: '', ratio: 'Math.ceil(peopleCount / 30)', min: 1, price: 120.00, amazonSearch: 'bluetooth speaker outdoor waterproof' },
                { name: 'Cornhole Set', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 45.00, amazonSearch: 'cornhole bean bag toss game set' },
                { name: 'Football', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 8.00, amazonSearch: 'football outdoor recreation' },
                { name: 'Frisbee', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 5.00, amazonSearch: 'frisbee disc outdoor ultimate' },
                { name: 'Giant Jenga', unit: '', ratio: 'Math.ceil(peopleCount / 25)', min: 1, price: 40.00, amazonSearch: 'giant jenga outdoor yard game' },
                { name: 'Horseshoe Set', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 1, price: 30.00, amazonSearch: 'horseshoe game set outdoor' },
                { name: 'Kubb', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 1, price: 50.00, amazonSearch: 'kubb viking chess outdoor game' },
                { name: 'Ladder Toss', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 1, price: 35.00, amazonSearch: 'ladder toss ball game outdoor' },
                { name: 'String Lights or Lanterns', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 2, price: 15.00, amazonSearch: 'string lights outdoor patio' },
                { name: 'Tarp or Ground Cover', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 25.00, amazonSearch: 'tarp ground cover outdoor camping' }
              ]
            }
          },
          vietcajun: {
            // === FOOD & INGREDIENTS ===
            'must-have': {
              title: 'Boil Essentials',
              items: [
                { name: 'Live Crawfish', unit: 'lbs', ratio: 'peopleCount * lbsPerPerson', min: 35, priceKey: 'crawfish' },
                { name: 'Smoked Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.12', min: 1, priceKey: 'sausage' },
                { name: 'Andouille Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.08', min: 1, priceKey: 'sausage' },
                { name: 'Crawfish Boil Dry Seasoning', unit: 'oz', ratio: 'crawfishLbs * 1.2', min: 6, priceKey: 'cajunSeasoning' },
                { name: 'Salt', unit: 'lbs', ratio: 'crawfishLbs * 0.1', min: 1, priceKey: 'salt' },
                { name: 'Lemon Juice', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 16, price: 0.20 },
                { name: 'Rice Vinegar', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1.5)', min: 12, price: 0.25 },
                { name: 'Corn on the Cob', unit: 'ears', ratio: 'peopleCount * 3', min: 12, priceKey: 'corn' },
                { name: 'Red Potatoes', unit: 'lbs', ratio: 'crawfishLbs * 0.4', min: 2, priceKey: 'redPotatoes' },
                { name: 'Yellow Onions', unit: 'lbs', ratio: 'crawfishLbs * 0.15', min: 1, priceKey: 'onions' },
                { name: 'Garlic', unit: 'heads', ratio: 'Math.ceil(crawfishLbs / 8)', min: 3, price: 0.75 },
                { name: 'Fresh Ginger', unit: 'oz', ratio: 'crawfishLbs * 0.8', min: 3, priceKey: 'ginger' },
                { name: 'Limes', unit: 'count', ratio: 'Math.ceil(peopleCount / 1.5)', min: 4, priceKey: 'limes' },
                { name: 'Lemongrass', unit: 'stalks', ratio: 'Math.ceil(crawfishLbs / 15)', min: 3, priceKey: 'lemongrass' }
              ]
            },
            'seasonings': {
              title: 'Seasonings & Aromatics',
              items: [
                { name: 'Bay Leaves', unit: 'oz', ratio: 'Math.ceil(crawfishLbs / 20)', min: 1, price: 2.50 },
                { name: 'Cilantro', unit: 'bunches', ratio: 'peopleCount * 0.2', min: 2, price: 2.50 },
                { name: 'Green Onions/Scallions', unit: 'bunches', ratio: 'peopleCount * 0.3', min: 2, price: 2.00 },
                { name: 'Liquid Boil Concentrate', unit: 'oz', ratio: 'Math.ceil(crawfishLbs * 4)', min: 32, price: 0.20 },
                { name: 'Oranges', unit: 'count', ratio: 'Math.ceil(peopleCount / 2)', min: 2, price: 0.75 },
                { name: 'Thai Chilies', unit: 'oz', ratio: 'peopleCount * 0.15', min: 1, price: 3.50 },
                { name: 'Vietnamese Seasoning Mix', unit: 'oz', ratio: 'peopleCount * 0.4', min: 4, priceKey: 'cajunSeasoning' },
                { name: 'Butter (for serving)', unit: 'lbs', ratio: 'peopleCount * 0.12', min: 1, price: 6.00 }
              ]
            },
            'proteins-seafood': {
              title: 'Proteins & Seafood',
              items: [
                { name: 'Boudin Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.08', min: 1, priceKey: 'sausage' },
                { name: 'Shrimp (Large)', unit: 'lbs', ratio: 'peopleCount * 0.45', min: 2, price: 12.00 },
                { name: 'Blue Crab or Snow Crab', unit: 'lbs', ratio: 'peopleCount * 0.3', min: 2, price: 18.00 },
                { name: 'Mussels', unit: 'lbs', ratio: 'peopleCount * 0.3', min: 2, price: 8.50 }
              ]
            },
            'vegetables': {
              title: 'Vegetables',
              items: [
                { name: 'Artichoke Hearts', unit: 'count', ratio: 'Math.ceil(peopleCount / 4)', min: 2, price: 1.25 },
                { name: 'Asian Mushrooms', unit: 'lbs', ratio: 'peopleCount * 0.25', min: 1, price: 5.50 },
                { name: 'Baby Bok Choy', unit: 'heads', ratio: 'peopleCount * 0.5', min: 4, price: 1.25 },
                { name: 'Chinese Broccoli', unit: 'bunches', ratio: 'Math.ceil(peopleCount / 6)', min: 1, price: 3.00 }
              ]
            },
            'beverages': {
              title: 'Beverages',
              items: [
                { name: 'Alcohol (Spirits or Mixers)', unit: 'bottles', ratio: 'Math.ceil(peopleCount / 10)', min: 1, price: 20.00 },
                { name: 'Asian Plum Wine/Sake', unit: 'bottles', ratio: 'Math.ceil(peopleCount / 12)', min: 0, price: 15.00 },
                { name: 'Beer', unit: 'bottles', ratio: 'peopleCount * 6', min: 12, price: 1.50 },
                { name: 'Bottle Openers or Corkscrews', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 3, price: 5.00 },
                { name: 'Bottled Water', unit: 'bottles', ratio: 'peopleCount * 3', min: 12, price: 0.75 },
                { name: 'Hard Seltzer or Cider', unit: 'bottles', ratio: 'peopleCount * 3', min: 6, price: 2.00 },
                { name: 'Ice', unit: 'bags', ratio: 'Math.ceil(peopleCount / 3)', min: 4, price: 3.50 },
                { name: 'Soft Drinks or Soda', unit: 'bottles', ratio: 'peopleCount * 4', min: 12, price: 1.25 },
                { name: 'Sparkling Water', unit: 'bottles', ratio: 'peopleCount * 2', min: 6, price: 1.00 },
                { name: 'Sweet Tea or Lemonade', unit: 'gallons', ratio: 'Math.ceil(peopleCount / 8)', min: 2, price: 4.00 },
                { name: 'Vietnamese Iced Coffee Mix', unit: 'bottles', ratio: 'Math.ceil(peopleCount / 10)', min: 1, price: 6.00 }
              ]
            },
            'desserts': {
              title: 'Desserts',
              items: [
                { name: 'Che Ba Mau', unit: 'servings', ratio: 'peopleCount * 0.5', min: 4, price: 3.50 },
                { name: 'Coconut Macaroons', unit: 'dozen', ratio: 'Math.ceil(peopleCount / 4)', min: 2, price: 9.00 },
                { name: 'Fresh Tropical Fruit Tray', unit: 'trays', ratio: 'Math.ceil(peopleCount / 12)', min: 1, price: 25.00 },
                { name: 'Mochi Ice Cream', unit: 'boxes', ratio: 'Math.ceil(peopleCount / 8)', min: 1, price: 12.00 }
              ]
            },
            
            // === EQUIPMENT & SUPPLIES ===
            'cleanup-waste': {
              title: 'Cleanup & Waste',
              items: [
                { name: 'Cleaning Rags or Towels', unit: 'packs', ratio: 'Math.ceil(peopleCount / 10)', min: 3, price: 3.00, amazonSearch: 'cleaning rags pack outdoor' },
                { name: 'Cleaning Solution', unit: 'oz', ratio: 'peopleCount * 4', min: 32, price: 0.12, amazonSearch: 'bleach cleaning solution outdoor' },
                { name: 'Heavy-duty Trash Bags', unit: 'boxes', ratio: 'Math.ceil(peopleCount / 20)', min: 2, price: 12.00, amazonSearch: 'heavy duty trash bags outdoor' },
                { name: 'Recycling Bins', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 2, price: 20.00, amazonSearch: 'outdoor recycling bin' },
                { name: 'Shell Waste Buckets', unit: '', ratio: 'Math.ceil(peopleCount / 8)', min: 4, price: 12.00, amazonSearch: 'waste bucket seafood shells' },
                { name: 'Table Scrub Brushes', unit: '', ratio: '2', min: 2, price: 8.00, amazonSearch: 'scrub brush cleaning outdoor table' },
                { name: 'Trash Cans', unit: '', ratio: 'Math.ceil(peopleCount / 10)', min: 3, price: 25.00, amazonSearch: 'outdoor trash can with lid' }
              ]
            },
            'comfort-safety': {
              title: 'Comfort & Safety',
              items: [
                { name: 'Bug Spray', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 12, price: 0.50, amazonSearch: 'bug spray insect repellent outdoor' },
                { name: 'Citronella Candles or Torches', unit: '', ratio: 'Math.ceil(peopleCount / 10)', min: 2, price: 8.00, amazonSearch: 'citronella candles outdoor torches' },
                { name: 'First Aid Kit', unit: 'kits', ratio: '1', min: 1, price: 25.00, amazonSearch: 'first aid kit outdoor camping' },
                { name: 'Hand Sanitizer', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1)', min: 8, price: 0.50, amazonSearch: 'hand sanitizer bottles travel size' },
                { name: 'Sunscreen', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 8, price: 1.00, amazonSearch: 'sunscreen spf outdoor sports' }
              ]
            },
            'entertainment-lighting': {
              title: 'Entertainment & Lighting',
              items: [
                { name: 'Beer Pong or Flip Cup Table', unit: '', ratio: 'Math.ceil(peopleCount / 25)', min: 1, price: 60.00, amazonSearch: 'beer pong table folding outdoor' },
                { name: 'Bluetooth Speaker or PA System', unit: '', ratio: 'Math.ceil(peopleCount / 30)', min: 1, price: 120.00, amazonSearch: 'bluetooth speaker outdoor waterproof' },
                { name: 'Cornhole Set', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 45.00, amazonSearch: 'cornhole bean bag toss game set' },
                { name: 'Football', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 8.00, amazonSearch: 'football outdoor recreation' },
                { name: 'Frisbee', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 5.00, amazonSearch: 'frisbee disc outdoor ultimate' },
                { name: 'Giant Jenga', unit: '', ratio: 'Math.ceil(peopleCount / 25)', min: 1, price: 40.00, amazonSearch: 'giant jenga outdoor yard game' },
                { name: 'Horseshoe Set', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 1, price: 30.00, amazonSearch: 'horseshoe game set outdoor' },
                { name: 'Kubb', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 1, price: 50.00, amazonSearch: 'kubb viking chess outdoor game' },
                { name: 'Ladder Toss', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 1, price: 35.00, amazonSearch: 'ladder toss ball game outdoor' },
                { name: 'String Lights or Lanterns', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 2, price: 15.00, amazonSearch: 'string lights outdoor patio' },
                { name: 'Tarp or Ground Cover', unit: '', ratio: 'Math.ceil(peopleCount / 15)', min: 1, price: 25.00, amazonSearch: 'tarp ground cover outdoor camping' }
              ]
            },
            'boil-equipment': {
              title: 'Boil Equipment',
              items: [
                { name: 'Crawfish Boiler Kit (Size Auto-Selected)', unit: 'set', ratio: '1', min: 1, price: 150.00, isDynamic: true, amazonSearch: 'crawfish boil burner pot kit' },
                { name: 'Propane Tank (20lb)', unit: '', ratio: 'DYNAMIC_PROPANE_TANKS', min: 2, isDynamic: true, price: 45.00, amazonSearch: 'propane tank 20lb outdoor cooking' },
                { name: 'Long-handled Paddle or Stirring Spoon', unit: '', ratio: '2', min: 2, price: 15.00, amazonSearch: 'crawfish boil paddle stirring spoon' },
                { name: 'Heat-resistant Gloves', unit: 'pairs', ratio: '2', min: 2, price: 12.00, amazonSearch: 'heat resistant gloves crawfish boil' },
                { name: 'Crawfish Tongs', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 2, price: 8.00, amazonSearch: 'crawfish tongs seafood' },
                { name: 'Hose with Spray Nozzle', unit: '', ratio: '1', min: 1, price: 35.00, amazonSearch: 'garden hose spray nozzle' },
                { name: 'Crawfish Washer', unit: '', ratio: '1', min: 1, price: 75.00, amazonSearch: 'crawfish washing machine basket seafood cleaner' },
                { name: 'Long Mesh Skimmer', unit: '', ratio: '2', min: 2, price: 12.00, amazonSearch: 'long handle mesh skimmer strainer crawfish boil' },
                { name: 'Fire Extinguisher', unit: '', ratio: '1', min: 1, price: 30.00, amazonSearch: 'fire extinguisher kitchen' }
              ]
            },
            'serving-party-setup': {
              title: 'Serving & Party Setup',
              items: [
                { name: 'Butter Cups or Dipping Cups', unit: '', ratio: 'peopleCount * 2', min: 10, price: 0.10, amazonSearch: 'dipping cups sauce containers disposable' },
                { name: 'Coolers (Food & Beverage Storage)', unit: 'count', ratio: 'Math.ceil(peopleCount / 12)', min: 3, price: 75.00, amazonSearch: 'cooler ice chest outdoor party' },
                { name: 'Crawfish Serving Trays or Baskets', unit: '', ratio: 'Math.ceil(peopleCount / 8)', min: 3, price: 15.00, amazonSearch: 'crawfish serving tray basket seafood' },
                { name: 'Disposable Cups', unit: '', ratio: 'peopleCount * 4', min: 20, price: 0.08, amazonSearch: 'disposable cups party plastic' },
                { name: 'Extension Cords', unit: 'count', ratio: 'Math.ceil(peopleCount / 30)', min: 2, price: 35.00, amazonSearch: 'heavy duty extension cord outdoor' },
                { name: 'Fans or Heaters', unit: '', ratio: 'Math.ceil(peopleCount / 25)', min: 1, price: 45.00, amazonSearch: 'portable fan outdoor party' },
                { name: 'Folding Chairs', unit: 'count', ratio: 'peopleCount * 1.1', min: 8, price: 35.00, amazonSearch: 'folding chairs outdoor' },
                { name: 'Folding Tables', unit: 'count', ratio: 'Math.ceil(peopleCount / 10)', min: 2, price: 95.00, amazonSearch: 'folding table outdoor' },
                { name: 'Napkins', unit: 'packs', ratio: 'Math.ceil(peopleCount / 15)', min: 3, price: 4.00, amazonSearch: 'party napkins disposable' },
                { name: 'Paper or Plastic Plates', unit: '', ratio: 'peopleCount * 3', min: 10, price: 0.15, amazonSearch: 'disposable paper plates party' },
                { name: 'Paper Towels', unit: 'rolls', ratio: 'Math.ceil(peopleCount / 8)', min: 4, price: 2.50, amazonSearch: 'paper towels rolls party' },
                { name: 'Plastic Utensils', unit: '', ratio: 'peopleCount * 1.5', min: 10, price: 0.25, amazonSearch: 'disposable plastic utensils party' },
                { name: 'Serving Scoops or Strainers', unit: '', ratio: 'Math.ceil(peopleCount / 12)', min: 2, price: 10.00, amazonSearch: 'serving scoop strainer seafood' },
                { name: 'Shade Tents/Canopies', unit: 'count', ratio: 'Math.ceil(peopleCount / 20)', min: 1, price: 120.00, amazonSearch: 'pop up canopy tent' },
                { name: 'Table Covers/Butcher Paper', unit: 'rolls', ratio: 'Math.ceil(peopleCount / 12)', min: 2, price: 12.00, amazonSearch: 'butcher paper roll' },
                { name: 'To-go Containers or Zip-top Bags', unit: '', ratio: 'Math.ceil(peopleCount / 3)', min: 10, price: 0.75, amazonSearch: 'takeout containers disposable food storage' },
                { name: 'Wet Wipes or Baby Wipes', unit: 'packs', ratio: 'Math.ceil(peopleCount / 6)', min: 3, price: 3.00, amazonSearch: 'wet wipes baby wipes party' }
              ]
            },
            'side-dishes': {
              title: 'Side Dishes',
              items: [
                { name: 'Garlic Bread or French Bread', unit: 'loaves', ratio: 'Math.ceil(peopleCount / 4)', min: 2, price: 3.50 },
                { name: 'Vietnamese Coleslaw', unit: 'lbs', ratio: 'peopleCount * 0.3', min: 2, price: 3.50 },
                { name: 'Asian Noodle Salad', unit: 'lbs', ratio: 'peopleCount * 0.4', min: 2, price: 4.50 },
                { name: 'Cornbread or Hush Puppies', unit: 'dozen', ratio: 'Math.ceil(peopleCount / 3)', min: 2, price: 6.00 }
              ]
            },
            'condiments-sauces': {
              title: 'Condiments & Sauces',
              items: [
                { name: 'Hot Sauce', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 10, price: 0.30 },
                { name: 'Cocktail Sauce', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1.5)', min: 12, price: 0.35 },
                { name: 'Remoulade', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1)', min: 8, price: 0.50 },
                { name: 'Creamy Horseradish', unit: 'oz', ratio: 'Math.ceil(peopleCount * 0.8)', min: 6, price: 0.58 },
                { name: 'Extra Garlic Butter', unit: 'lbs', ratio: 'peopleCount * 0.05', min: 1, price: 5.00 }
              ]
            }
          },
          
          texorleans: {
            // === FOOD & INGREDIENTS ===
            'must-have': {
              title: 'Boil Essentials',
              items: [
                { name: 'Live Crawfish', unit: 'lbs', ratio: 'peopleCount * lbsPerPerson', min: 35, priceKey: 'crawfish' },
                { name: 'Smoked Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.12', min: 1, priceKey: 'sausage' },
                { name: 'Kielbasa Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.08', min: 1, priceKey: 'sausage' },
                { name: 'Andouille Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.1', min: 1, priceKey: 'sausage' },
                { name: 'Crawfish Boil Dry Seasoning', unit: 'oz', ratio: 'crawfishLbs * 1.4', min: 8, priceKey: 'cajunSeasoning' },
                { name: 'Salt', unit: 'lbs', ratio: 'crawfishLbs * 0.1', min: 1, priceKey: 'salt' },
                { name: 'Lemon Juice', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 16, price: 0.20 },
                { name: 'White Vinegar', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1.5)', min: 16, price: 0.15 },
                { name: 'Corn on the Cob', unit: 'ears', ratio: 'peopleCount * 3', min: 12, priceKey: 'corn' },
                { name: 'Red Potatoes', unit: 'lbs', ratio: 'crawfishLbs * 0.45', min: 2, priceKey: 'redPotatoes' },
                { name: 'Yellow Onions', unit: 'lbs', ratio: 'crawfishLbs * 0.18', min: 1, priceKey: 'onions' },
                { name: 'Garlic', unit: 'heads', ratio: 'Math.ceil(crawfishLbs / 10)', min: 2, price: 0.75 },
                { name: 'Lemons', unit: 'count', ratio: 'Math.ceil(peopleCount / 2)', min: 3, priceKey: 'lemons' },
                { name: 'Whole Mushrooms', unit: 'lbs', ratio: 'crawfishLbs * 0.2', min: 1, price: 4.50 }
              ]
            },
            'seasonings': {
              title: 'Seasonings & Aromatics',
              items: [
                { name: 'Bay Leaves', unit: 'oz', ratio: 'Math.ceil(crawfishLbs / 20)', min: 1, price: 2.50, amazonSearch: 'crawfish boil bay leaves' },
                { name: 'Beer (for boil)', unit: 'cans', ratio: 'Math.ceil(crawfishLbs / 20)', min: 6, price: 1.50 },
                { name: 'Butter (for serving)', unit: 'lbs', ratio: 'peopleCount * 0.15', min: 1, price: 6.00 },
                { name: 'Cayenne Pepper', unit: 'oz', ratio: 'peopleCount * 0.2', min: 2, price: 3.00 },
                { name: 'Celery Seed', unit: 'oz', ratio: 'Math.ceil(crawfishLbs / 25)', min: 1, price: 3.50 },
                { name: 'Liquid Boil Concentrate', unit: 'oz', ratio: 'Math.ceil(crawfishLbs * 4)', min: 32, price: 0.20, amazonSearch: 'crawfish boil liquid concentrate' },
                { name: 'Oranges', unit: 'count', ratio: 'Math.ceil(peopleCount / 2)', min: 2, price: 0.75 },
                { name: 'Paprika', unit: 'oz', ratio: 'peopleCount * 0.3', min: 3, price: 4.00 },
                { name: 'Tex-Orleans Seasoning Blend', unit: 'oz', ratio: 'peopleCount * 0.6', min: 4, priceKey: 'cajunSeasoning', amazonSearch: 'crawfish boil seasoning' }
              ]
            },
            'proteins-seafood': {
              title: 'Proteins & Seafood',
              items: [
                { name: 'Blue Crab or Snow Crab', unit: 'lbs', ratio: 'peopleCount * 0.25', min: 2, price: 18.00 },
                { name: 'Boudin Sausage', unit: 'lbs', ratio: 'crawfishLbs * 0.08', min: 1, priceKey: 'sausage' },
                { name: 'Bratwurst', unit: 'lbs', ratio: 'crawfishLbs * 0.08', min: 1, priceKey: 'sausage' },
                { name: 'Chicken Wings', unit: 'lbs', ratio: 'peopleCount * 0.3', min: 2, price: 8.00 },
                { name: 'Mussels', unit: 'lbs', ratio: 'peopleCount * 0.3', min: 2, price: 8.50 },
                { name: 'Shrimp (Medium-Large)', unit: 'lbs', ratio: 'peopleCount * 0.4', min: 2, price: 12.00 }
              ]
            },
            'vegetables-sides': {
              title: 'Texas Vegetables & Sides',
              items: [
                { name: 'Artichoke Hearts', unit: 'count', ratio: 'Math.ceil(peopleCount / 4)', min: 2, price: 1.25 },
                { name: 'Artichokes', unit: 'count', ratio: 'Math.ceil(peopleCount / 3)', min: 2, price: 3.50 },
                { name: 'Brussels Sprouts', unit: 'lbs', ratio: 'peopleCount * 0.15', min: 1, price: 5.00 },
                { name: 'Celery', unit: 'bunches', ratio: 'Math.ceil(peopleCount / 8)', min: 1, price: 2.50 },
                { name: 'Jalapeño Peppers', unit: 'lbs', ratio: 'peopleCount * 0.1', min: 1, price: 4.00 },
                { name: 'Pineapple Chunks', unit: 'lbs', ratio: 'peopleCount * 0.2', min: 1, price: 4.50 },
                { name: 'Sweet Potatoes', unit: 'lbs', ratio: 'peopleCount * 0.25', min: 2, price: 3.00 }
              ]
            },
            'equipment-tools': {
              title: 'Boil Equipment & Tools',
              items: [
                { name: 'Crawfish Boiler Kit (Size Auto-Selected)', unit: 'set', ratio: '1', min: 1, price: 150.00, isDynamic: true, amazonSearch: 'crawfish boil burner pot kit' },
                { name: 'Propane Tank (20lb)', unit: '', ratio: 'DYNAMIC_PROPANE_TANKS', min: 2, isDynamic: true, price: 45.00, amazonSearch: 'propane tank 20lb' },
                { name: 'Long-handled Paddle', unit: '', ratio: '2', min: 2, price: 15.00, amazonSearch: 'crawfish boil paddle' },
                { name: 'Heat-resistant Gloves', unit: 'pairs', ratio: '2', min: 2, price: 12.00, amazonSearch: 'heat resistant gloves' },
                { name: 'Crawfish Basket Inserts', unit: '', ratio: 'Math.ceil(peopleCount / 20)', min: 2, price: 25.00, amazonSearch: 'crawfish basket strainer' },
                { name: 'Long Mesh Skimmer', unit: '', ratio: '2', min: 2, price: 12.00, amazonSearch: 'crawfish skimmer' },
                { name: 'Hose with Spray Nozzle', unit: '', ratio: '1', min: 1, price: 35.00, amazonSearch: 'garden hose spray nozzle' },
                { name: 'Fire Extinguisher', unit: '', ratio: '1', min: 1, price: 30.00, amazonSearch: 'fire extinguisher' }
              ]
            },
            'serving-party-setup': {
              title: 'Serving & Party Setup',
              items: [
                { name: 'Folding Tables', unit: '', ratio: 'Math.ceil(peopleCount / 8)', min: 2, price: 60.00 },
                { name: 'Folding Chairs', unit: '', ratio: 'peopleCount * 1.1', min: 4, price: 25.00 },
                { name: 'Table Covers or Newspaper', unit: '', ratio: 'Math.ceil(peopleCount / 10)', min: 3, price: 8.00 },
                { name: 'Crawfish Serving Trays', unit: '', ratio: 'Math.ceil(peopleCount / 8)', min: 3, price: 15.00 },
                { name: 'Paper Plates', unit: '', ratio: 'peopleCount * 3', min: 10, price: 0.15 },
                { name: 'Plastic Utensils', unit: '', ratio: 'peopleCount * 1.5', min: 10, price: 0.25 },
                { name: 'Napkins', unit: 'packs', ratio: 'Math.ceil(peopleCount / 15)', min: 3, price: 4.00 },
                { name: 'Wet Wipes', unit: 'packs', ratio: 'Math.ceil(peopleCount / 10)', min: 3, price: 3.50 },
                { name: 'To-Go Containers', unit: '', ratio: 'peopleCount * 0.5', min: 5, price: 0.75 }
              ]
            },
            'beverages': {
              title: 'Beverages & Drinks',
              items: [
                { name: 'Beer (drinking)', unit: 'cans', ratio: 'peopleCount * 4', min: 12, price: 1.50 },
                { name: 'Sweet Tea', unit: 'gallons', ratio: 'Math.ceil(peopleCount / 8)', min: 2, price: 4.00 },
                { name: 'Soft Drinks', unit: 'cans', ratio: 'peopleCount * 2', min: 12, price: 1.25 },
                { name: 'Water Bottles', unit: '', ratio: 'peopleCount * 3', min: 12, price: 0.50 },
                { name: 'Ice', unit: 'lbs', ratio: 'peopleCount * 2', min: 20, price: 2.50 },
                { name: 'Lemonade', unit: 'gallons', ratio: 'Math.ceil(peopleCount / 10)', min: 1, price: 5.00 }
              ]
            },
            'sides-condiments': {
              title: 'Texas Sides & Condiments',
              items: [
                { name: 'Coleslaw', unit: 'lbs', ratio: 'peopleCount * 0.25', min: 2, price: 6.00 },
                { name: 'Texas Toast', unit: 'loaves', ratio: 'Math.ceil(peopleCount / 8)', min: 2, price: 3.50 },
                { name: 'Potato Salad', unit: 'lbs', ratio: 'peopleCount * 0.3', min: 2, price: 8.00 },
                { name: 'BBQ Sauce', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1.2)', min: 12, price: 0.38, amazonSearch: 'bbq sauce' },
                { name: 'Hot Sauce Variety', unit: 'oz', ratio: 'Math.ceil(peopleCount * 2)', min: 10, price: 0.50, amazonSearch: 'hot sauce' },
                { name: 'Ranch Dressing', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1.2)', min: 12, price: 0.29 },
                { name: 'Cocktail Sauce', unit: 'oz', ratio: 'Math.ceil(peopleCount * 1.5)', min: 12, price: 0.35, amazonSearch: 'cocktail sauce' }
              ]
            },
            'cleanup': {
              title: 'Cleanup & Waste',
              items: [
                { name: 'Shell Waste Buckets', unit: '', ratio: 'Math.ceil(peopleCount / 6)', min: 4, price: 12.00, amazonSearch: 'waste bucket' },
                { name: 'Trash Bags (Heavy Duty)', unit: 'rolls', ratio: 'Math.ceil(peopleCount / 15)', min: 3, price: 8.00, amazonSearch: 'heavy duty trash bags' },
                { name: 'Paper Towels', unit: 'rolls', ratio: 'Math.ceil(peopleCount / 8)', min: 6, price: 2.50 },
                { name: 'Cleaning Solution', unit: 'oz', ratio: 'peopleCount * 4', min: 32, price: 0.12, amazonSearch: 'cleaning solution' },
                { name: 'Disposable Gloves', unit: 'boxes', ratio: '2', min: 2, price: 8.00, amazonSearch: 'disposable gloves' },
                { name: 'Table Scrub Brush', unit: '', ratio: '2', min: 2, price: 8.00, amazonSearch: 'scrub brush' }
              ]
            }
          }
        };

        function buildAdvancedItems({ peopleCount, lbsPerPerson, location, style = 'cajun', spiceLevel = 3 }) {
          const people = Number(peopleCount);
          const lpp = Number(lbsPerPerson);
          const prices = CONFIG.regionalPricing[location] ?? CONFIG.regionalPricing.louisiana;
          const crawfishLbs = people * lpp;
          const styleItems = ADVANCED_ITEMS[style] ?? ADVANCED_ITEMS.cajun;
          const equipmentSize = getEquipmentSize(crawfishLbs);
          
          // Spice level multipliers for seasoning ingredients
          const spiceMultipliers = {
            1: 0.7,  // Mild - 30% less seasoning
            2: 0.85, // Medium - 15% less seasoning  
            3: 1.0,  // Hot - normal amount (baseline)
            4: 1.5,  // Extra Hot - 50% more seasoning
            5: 2.0   // Inferno - 100% more seasoning
          };
          const spiceMultiplier = spiceMultipliers[Number(spiceLevel)] || 1.0;
          
          // Helper function to evaluate ratio strings safely
          const evalRatio = (ratioStr) => {
            // Replace variables with actual values
            let formula = ratioStr
              .replace(/peopleCount/g, people)
              .replace(/lbsPerPerson/g, lpp)
              .replace(/crawfishLbs/g, crawfishLbs);
            
            // Handle Math functions and basic arithmetic
            try {
              return Function(`"use strict"; return (${formula})`)();
            } catch (e) {
              console.warn('Error evaluating formula:', formula, e);
              return 1; // fallback
            }
          };
          
          const allItems = [];
          let total = 0;
          
          // Process all categories
          Object.keys(styleItems).forEach(categoryKey => {
            const category = styleItems[categoryKey];
            category.items.forEach(item => {
              let processedItem = { ...item };
              
              // Handle dynamic equipment sizing
              if (item.isDynamic) {
                if (item.name === 'Crawfish Boiler Kit (Size Auto-Selected)') {
                  processedItem.name = equipmentSize.burnerSize;
                  processedItem.price = equipmentSize.burnerPrice;
                  processedItem.amazonSearchTerm = equipmentSize.searchTerm;
                } else if (item.name === 'Propane Tank (20lb)' && item.ratio === 'DYNAMIC_PROPANE_TANKS') {
                  processedItem.ratio = equipmentSize.propaneTanks.toString();
                }
              }
              
              // Apply spice multiplier to seasoning ingredients
              const isSeasoningItem = processedItem.name.toLowerCase().includes('season') ||
                                    processedItem.name.toLowerCase().includes('spice') ||
                                    processedItem.name.toLowerCase().includes('cajun') ||
                                    processedItem.name.toLowerCase().includes('salt') ||
                                    processedItem.name.toLowerCase().includes('pepper') ||
                                    processedItem.name.toLowerCase().includes('bay') ||
                                    processedItem.name.toLowerCase().includes('liquid boil') ||
                                    category.title.toLowerCase().includes('seasoning');
              
              let baseQty = Math.max(processedItem.min, evalRatio(processedItem.ratio));
              const qty = isSeasoningItem ? Math.max(processedItem.min, baseQty * spiceMultiplier) : baseQty;
              const price = processedItem.priceKey ? prices[processedItem.priceKey] : processedItem.price || 0;
              const itemTotal = qty * price;
              
              allItems.push({
                ...processedItem,
                qty,
                price,
                category: category.title
              });
              
              total += itemTotal;
            });
          });
          
          return { items: allItems, total, categories: Object.keys(styleItems).map(key => styleItems[key]) };
        }

        // Helper function to format quantity display
        const formatQuantity = (qty, unit) => {
          const num = Number(qty);
          const wholeNumberUnits = ['', 'rolls', 'ears', 'bottles', 'boxes', 'packs', 'cans', 'bunches', 'dozen', 'servings', 'gallons'];
          
          if (wholeNumberUnits.includes(unit) || Number.isInteger(num)) {
            return Math.round(num).toString();
          }
          return num.toFixed(1);
        };

        // Helper function to categorize items into foodstuffs vs non-foodstuffs
        const categorizeShoppingList = (items) => {
          const foodstuffs = [];
          const nonFoodstuffs = [];
          
          const foodKeywords = [
            'crawfish', 'sausage', 'corn', 'potato', 'onion', 'garlic', 'lemon', 'mushroom', 'celery', 'carrot', 'artichoke',
            'seasoning', 'salt', 'juice', 'vinegar', 'butter', 'sauce', 'remoulade', 'parsley', 'thyme', 'bay leaves',
            'beer', 'seltzer', 'hurricane', 'bloody mary', 'margarita', 'whiskey', 'soft drink', 'tea', 'water',
            'bread', 'coleslaw', 'potato salad', 'hush puppies', 'pickle', 'cracker',
            'pudding', 'pie', 'brownie', 'cake', 'ice cream'
          ];
          
          const nonFoodKeywords = [
            'burner', 'propane', 'tank', 'strainer', 'paddle', 'thermometer', 'glove', 'tong', 'bucket', 'cooler',
            'plate', 'utensil', 'tray', 'napkin', 'towel', 'wipe', 'cup', 'trash', 'bag', 'bin', 'container',
            'table', 'covering', 'cord', 'extinguisher', 'opener'
          ];
          
          items.forEach(item => {
            const itemNameLower = item.name.toLowerCase();
            const isFood = foodKeywords.some(keyword => itemNameLower.includes(keyword)) || 
                           (item.category && ['Crawfish & Main Ingredients', 'Sides & Extras', 'Desserts', 'Drinks & Ice', 'Main Ingredients', 'Seasonings'].includes(item.category));
            
            const isNonFood = nonFoodKeywords.some(keyword => itemNameLower.includes(keyword)) ||
                              (item.category && ['Cooking Gear & Setup', 'Serving & Dining Supplies'].includes(item.category));
            
            if (isFood && !isNonFood) {
              foodstuffs.push(item);
            } else {
              nonFoodstuffs.push(item);
            }
          });
          
          return { foodstuffs, nonFoodstuffs };
        };

        function buildToupsBoilItems({ peopleCount, lbsPerPerson, location }) {
          const people = Number(peopleCount);
          const lpp = Number(lbsPerPerson);
          const prices = CONFIG.regionalPricing[location] ?? CONFIG.regionalPricing.louisiana;
          const crawfishLbs = people * lpp;

          const ratios = {
            redPotatoes: 0.333,
            lemonJuiceCups: 0.1,
            vinegarCups: 0.067,
            saltCups: 0.1,
            boilSpiceCups: 0.2,
            onions: 0.2,
            corn: 0.267,
            garlicCups: 0.1,
            sausage: 0.1
          };

          const OZ_PER_CUP = 8;
          const CUPS_PER_LB_SALT = 2;

          const items = [
            { name: 'Crawfish', qty: Math.max(30, Math.ceil(crawfishLbs / 30) * 30), unit: 'lbs', price: prices.crawfish },
            { name: 'Smoked Sausage', qty: crawfishLbs * ratios.sausage * 0.5, unit: 'lbs', price: prices.sausage },
            { name: 'Andouille Sausage', qty: crawfishLbs * ratios.sausage * 0.5, unit: 'lbs', price: prices.sausage },
            { name: 'Corn', qty: crawfishLbs * ratios.corn * 0.5, unit: 'lbs', price: prices.corn },
            { name: 'Red Potatoes', qty: crawfishLbs * ratios.redPotatoes, unit: 'lbs', price: prices.redPotatoes },
            { name: 'Yellow Onions', qty: Math.max(0.5, crawfishLbs * ratios.onions * 0.5), unit: 'lbs', price: prices.onions },
            { name: 'Garlic', qty: Math.max(4, crawfishLbs * ratios.garlicCups * OZ_PER_CUP), unit: 'oz', price: prices.garlic },
            { name: 'Crawfish Boil Dry Seasoning', qty: Math.max(4, crawfishLbs * ratios.boilSpiceCups * OZ_PER_CUP), unit: 'oz', price: prices.cajunSeasoning },
            { name: 'Lemon Juice', qty: Math.max(4, crawfishLbs * ratios.lemonJuiceCups * OZ_PER_CUP), unit: 'oz', price: prices.lemonJuice },
            { name: 'Vinegar', qty: Math.max(4, crawfishLbs * ratios.vinegarCups * OZ_PER_CUP), unit: 'oz', price: prices.vinegar },
            { name: 'Salt', qty: Math.max(1, (crawfishLbs * ratios.saltCups) / CUPS_PER_LB_SALT), unit: 'lbs', price: prices.salt }
          ];

          const total = items.reduce((sum, item) => sum + Number(item.qty) * Number(item.price), 0);
          return { items, total };
        }

        // Product Card Component for Shop Section
        const ProductCard = ({ product, recommended = false }) => {
          return React.createElement('div', {
            className: `bg-white/5 p-4 rounded-lg border ${recommended ? 'border-orange-500 bg-orange-500/10' : 'border-white/10'} hover:bg-white/10 transition-colors`
          },
            recommended && React.createElement('div', {
              className: "text-orange-400 text-xs font-semibold mb-2 flex items-center gap-1"
            }, "⭐ RECOMMENDED FOR YOUR PARTY"),
            React.createElement('div', { className: "flex items-start gap-4" },
              React.createElement('div', { className: "text-3xl" }, product.image),
              React.createElement('div', { className: "flex-1" },
                React.createElement('h4', { className: "font-semibold text-white text-lg mb-1" }, product.name),
                React.createElement('p', { className: "text-gray-300 text-sm mb-2" }, product.description),
                product.includes && React.createElement('p', { className: "text-gray-400 text-xs mb-2" }, `Includes: ${product.includes}`),
                product.size && React.createElement('p', { className: "text-gray-400 text-xs mb-2" }, `Size: ${product.size}`),
                React.createElement('div', { className: "flex items-center gap-3 mb-3" },
                  React.createElement('span', { className: "text-orange-400 text-xs flex items-center gap-1" },
                    `⭐ ${product.rating} (${product.reviews} reviews)`
                  ),
                  React.createElement('span', { className: "text-green-400 text-xs" }, "Prime eligible")
                ),
                React.createElement('div', { className: "flex items-center justify-between" },
                  React.createElement('div', { className: "flex items-center gap-2" },
                    React.createElement('span', { className: "text-xl font-bold text-orange-400" }, product.price),
                    product.originalPrice && React.createElement('span', { className: "text-sm text-gray-500 line-through" }, product.originalPrice)
                  ),
                  React.createElement('a', {
                    href: getAmazonProductLink(product.searchTerm),
                    target: "_blank",
                    rel: "noopener noreferrer",
                    className: "bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-sm"
                  }, "Buy on Amazon")
                )
              )
            )
          );
        };

        // Shop Section Component
        // Enhanced product card with better presentation
        const EnhancedProductCard = ({ product, featured = false, compact = false }) => {
          const cardClass = compact 
            ? "bg-white/5 border border-white/10 rounded-lg p-3"
            : featured 
              ? "bg-gradient-to-br from-orange-600/20 to-red-600/20 border-2 border-orange-500/50 rounded-xl p-4"
              : "bg-white/5 border border-white/10 rounded-lg p-4";

          return React.createElement('div', { className: cardClass },
            // Badge and problem-solution
            React.createElement('div', { className: "flex items-start justify-between mb-3" },
              React.createElement('div', { className: "flex-1" },
                product.badge && React.createElement('span', { 
                  className: `inline-block px-2 py-1 text-xs font-bold rounded mb-2 ${
                    product.badge === 'MOST POPULAR' ? 'bg-blue-600 text-white' :
                    product.badge === 'BEST VALUE' ? 'bg-green-600 text-white' :
                    product.badge === 'PRO CHOICE' ? 'bg-purple-600 text-white' :
                    product.badge === 'SAFETY FIRST' ? 'bg-red-600 text-white' :
                    'bg-gray-600 text-white'
                  }`
                }, product.badge),
                React.createElement('div', { className: "text-2xl mb-1" }, product.image),
                React.createElement('h5', { className: "font-semibold text-lg text-white mb-1" }, product.name),
                product.subtitle && React.createElement('p', { className: "text-sm text-gray-400 mb-2" }, product.subtitle)
              )
            ),

            // Problem-solution messaging
            !compact && product.problemSolved && React.createElement('div', { 
              className: "bg-white/10 rounded-lg p-3 mb-3"
            },
              React.createElement('p', { className: "text-sm font-semibold text-orange-300 mb-1" }, product.problemSolved),
              React.createElement('p', { className: "text-xs text-gray-300" }, product.whyThisKit || product.whyThis)
            ),

            // Description and includes
            React.createElement('p', { className: "text-sm text-gray-300 mb-3" }, product.description),
            
            !compact && product.includes && React.createElement('div', { className: "mb-3" },
              React.createElement('p', { className: "text-xs text-gray-400 mb-1" }, "Includes:"),
              React.createElement('ul', { className: "text-xs text-gray-300 space-y-0.5" },
                ...product.includes.map((item, i) => 
                  React.createElement('li', { key: i, className: "flex items-center gap-1" },
                    React.createElement('span', { className: "text-green-400" }, "✓"),
                    item
                  )
                )
              )
            ),

            // Pricing and social proof
            React.createElement('div', { className: "flex items-center justify-between" },
              React.createElement('div', {},
                React.createElement('div', { className: "flex items-center gap-2 mb-1" },
                  React.createElement('span', { className: "text-xl font-bold text-orange-400" }, product.price),
                  product.originalPrice && React.createElement('span', { className: "text-sm text-gray-500 line-through" }, product.originalPrice)
                ),
                React.createElement('div', { className: "flex items-center gap-1 text-xs text-gray-400" },
                  React.createElement('span', {}, `⭐ ${product.rating}`),
                  React.createElement('span', {}, `(${product.reviews} reviews)`)
                )
              ),
              React.createElement('a', {
                href: getAmazonProductLink(product.searchTerm),
                target: "_blank",
                rel: "noopener noreferrer",
                className: `px-4 py-2 rounded-lg font-semibold transition-colors text-sm ${
                  featured 
                    ? 'bg-orange-600 hover:bg-orange-700 text-white' 
                    : 'bg-orange-600/80 hover:bg-orange-600 text-white'
                }`
              }, compact ? "🛒 Buy" : "🛒 Buy on Amazon")
            )
          );
        };

        const ShopSection = ({ peopleCount, crawfishLbs }) => {
          // Get dynamic recommendations
          const recommendedKit = SHOP_ESSENTIALS.getRecommendedKit(peopleCount, crawfishLbs);
          const contextMessage = SHOP_ESSENTIALS.getContextMessage(peopleCount, peopleCount <= 8);

          return React.createElement('div', { className: "space-y-6" },
            
            // Context-driven intro message
            React.createElement('div', { 
              className: "bg-gradient-to-r from-orange-600/20 to-red-600/20 border border-orange-500/30 rounded-lg p-4"
            },
              React.createElement('h4', { className: "font-semibold text-orange-300 mb-2" }, contextMessage.title),
              React.createElement('p', { className: "text-gray-300 text-sm mb-2" }, contextMessage.message),
              React.createElement('p', { className: "text-xs text-orange-400 italic" }, contextMessage.tip)
            ),

            // Featured kit recommendation
            React.createElement('div', {},
              React.createElement('h4', { className: "font-semibold text-lg mg-gradient-text mb-4 flex items-center gap-2" },
                "🎯 Recommended for You",
                React.createElement('span', { className: "text-sm font-normal text-gray-400" }, 
                  `Based on ${peopleCount} people`
                )
              ),
              React.createElement(EnhancedProductCard, { 
                product: recommendedKit, 
                featured: true 
              })
            ),

            // Essential add-ons
            React.createElement('div', {},
              React.createElement('h4', { className: "font-semibold text-lg mg-gradient-text mb-4 flex items-center gap-2" },
                "➕ Complete Your Setup",
                React.createElement('span', { className: "text-sm font-normal text-gray-400" }, "Don't forget these essentials")
              ),
              React.createElement('div', { className: "grid gap-3" },
                ...SHOP_ESSENTIALS.addOns.map((addon, index) =>
                  React.createElement(EnhancedProductCard, { 
                    key: index, 
                    product: addon, 
                    compact: true 
                  })
                )
              )
            ),

            // Bundle suggestion
            React.createElement('div', { 
              className: "bg-emerald-600/20 border border-emerald-500/30 rounded-lg p-4 text-center"
            },
              React.createElement('h5', { className: "font-semibold text-emerald-300 mb-2" }, 
                "🎁 Bundle & Save"
              ),
              React.createElement('p', { className: "text-gray-300 text-sm mb-3" }, 
                `Get the ${recommendedKit.name} + Safety Gloves together`
              ),
              React.createElement('div', { className: "flex items-center justify-center gap-2 text-lg font-bold" },
                React.createElement('span', { className: "text-gray-400 line-through" }, 
                  `$${(parseFloat(recommendedKit.originalPrice.slice(1)) + 24.99).toFixed(2)}`
                ),
                React.createElement('span', { className: "text-emerald-300" }, 
                  `$${(parseFloat(recommendedKit.price.slice(1)) + 16.99).toFixed(2)}`
                ),
                React.createElement('span', { className: "text-sm text-emerald-400" }, "SAVE $31!")
              )
            )
          );
        };

        function CrawfishBoilCalculator() {
          // State declarations
          const [style, setStyle] = useState('cajun');
          const [location, setLocation] = useState('other'); // Default to 'other' for estimates
          const [locationStatus, setLocationStatus] = useState('detecting'); // 'detecting', 'detected', 'denied', 'error'
          const [detectedRegion, setDetectedRegion] = useState('');
          const [peopleCount, setPeopleCount] = useState(50);
          const [lbsPerPerson, setLbsPerPerson] = useState(3.0);
          const [showExportMenu, setShowExportMenu] = useState(false);
          
          // Regional smart defaults for lbs per person
          const getRegionalDefault = (location) => {
            const defaults = {
              'louisiana': 3.5,  // Louisianans eat more crawfish
              'texas': 3.0,      // Standard amount
              'other': 2.5       // Conservative for first-timers
            };
            return defaults[location] || 3.0;
          };
          
          // Input validation and smart suggestions

          // Amazon affiliate link generation
        const generateAmazonLink = (searchTerm) => {
          if (!searchTerm) return null;
          const baseUrl = "https://www.amazon.com/s";
          const params = new URLSearchParams({
            k: searchTerm,
            tag: "oswaldcalcula-20",
            ref: "sr_1_1"
          });
          return `${baseUrl}?${params.toString()}`;
        };

        // Enhanced scale helpers for people count slider with 50 people at exact middle (slider position 50)
          const peopleCountToSlider = (people) => {
            // Convert people count to slider value (0-100) with 50 people at position 50
            if (people <= 0) return 0;
            if (people >= 100000) return 100;
            
            if (people <= 50) {
              // Linear scale for 0-50 people (uses first 50% of slider: 0-50)
              return Math.round((people / 50) * 50);
            } else {
              // Logarithmic scale for 50-100000 people (uses last 50% of slider: 50-100)
              const minLog = Math.log(50);
              const maxLog = Math.log(100000);
              const logValue = ((Math.log(people) - minLog) / (maxLog - minLog)) * 50;
              return Math.round(50 + logValue);
            }
          };

          const sliderToPeopleCount = (sliderValue) => {
            // Convert slider value (0-100) to people count with 50 people at position 50
            if (sliderValue <= 0) return 0;
            if (sliderValue >= 100) return 100000;
            
            if (sliderValue <= 50) {
              // Linear scale for 0-50 people (first 50% of slider)
              return Math.round((sliderValue / 50) * 50);
            } else {
              // Logarithmic scale for 50-100000 people (last 50% of slider)
              const minLog = Math.log(50);
              const maxLog = Math.log(100000);
              const logValue = minLog + ((sliderValue - 50) / 50) * (maxLog - minLog);
              return Math.round(Math.exp(logValue));
            }
          };
          
          const validatePeopleCount = (value) => {
            const num = Math.max(0, Number(value) || 0);
            return num;
          };

          const validateLbsPerPerson = (value) => {
            const num = Math.max(0, Math.min(10, Number(value) || 0));
            return num;
          };

          const validateSpiceLevel = (value) => {
            const num = Math.max(1, Math.min(5, Number(value) || 3));
            return num;
          };

          // Validated setters
          const setValidatedPeopleCount = (value) => {
            setPeopleCount(validatePeopleCount(value));
          };

          const setValidatedLbsPerPerson = (value) => {
            setLbsPerPerson(validateLbsPerPerson(value));
          };

          const setValidatedSpiceLevel = (value) => {
            setSpiceLevel(validateSpiceLevel(value));
          };
          
          const [spiceLevel, setSpiceLevel] = useState(3);
          const [totalCost, setTotalCost] = useState(0);
          const [shoppingList, setShoppingList] = useState([]);
          const [itemToggles, setItemToggles] = useState({});
          const [error, setError] = useState(null);
          const [amazonSectionExpanded, setAmazonSectionExpanded] = useState(false);
          const [musicSectionExpanded, setMusicSectionExpanded] = useState(false);
          const [isInitialized, setIsInitialized] = useState(false);
          const [actionMode, setActionMode] = useState('expand'); // 'expand', 'collapse', 'reset'
          const [categoryExpanded, setCategoryExpanded] = useState({
            'must-have': true,  // Core essentials - only category expanded by default
            'seasonings': false,
            'proteins-seafood': false,
            'vegetables': false,
            'side-dishes-condiments': false,
            'desserts': false,
            'beverages': false,
            'equipment-tools': false,
            'serving-party-setup': false,
            'comfort-safety': false,
            'entertainment-lighting': false,
            'cleanup-waste': false
          });

          // Toggle category expanded state
          const toggleCategory = (categoryKey) => {
            const isExpanding = !categoryExpanded[categoryKey];
            
            setCategoryExpanded(prev => ({
              ...prev,
              [categoryKey]: isExpanding
            }));

            // Get items in this category
            const categoryItems = shoppingList.filter(item => {
              const categoryData = Object.values(ADVANCED_ITEMS[style] || ADVANCED_ITEMS.cajun)
                .find(cat => cat.title === item.category);
              return categoryData && Object.keys(ADVANCED_ITEMS[style] || ADVANCED_ITEMS.cajun)
                .find(key => (ADVANCED_ITEMS[style] || ADVANCED_ITEMS.cajun)[key] === categoryData) === categoryKey;
            });

            // Don't automatically disable items when collapsing categories
            // Items should maintain their current enabled/disabled state regardless of category expansion
            // Users can still use "Select All" / "Deselect All" buttons to control items in collapsed categories
          };

          // Expand/collapse all categories
          const expandAllCategories = () => {
            // Get all actual category keys from current style and expand them all
            const styleItems = ADVANCED_ITEMS[style] || ADVANCED_ITEMS.cajun;
            const allCategoryKeys = Object.keys(styleItems);
            
            const expandedState = {};
            allCategoryKeys.forEach(categoryKey => {
              expandedState[categoryKey] = true;
            });
            
            setCategoryExpanded(expandedState);
          };

          const collapseAllCategories = () => {
            // Collapse ALL categories (including essentials)
            setCategoryExpanded(prev => {
              const newState = {};
              Object.keys(prev).forEach(key => {
                newState[key] = false; // Collapse everything
              });
              return newState;
            });
          };

          // Cycling action button function (for view state)
          const handleCyclingAction = () => {
            if (actionMode === 'expand') {
              expandAllCategories();
              setActionMode('collapse');
            } else {
              collapseAllCategories();
              setActionMode('expand');
            }
          };

          // Get button text based on current mode
          const getActionButtonText = () => {
            switch (actionMode) {
              case 'expand': return 'Expand All';
              case 'collapse': return 'Collapse All';
              default: return 'Expand All';
            }
          };

          // Item state cycling button (Enable/Disable only)
          const [itemMode, setItemMode] = useState('enable');

          const handleItemCycling = () => {
            if (itemMode === 'enable') {
              // Enable all items
              const allEnabled = {};
              shoppingList.forEach(item => {
                allEnabled[item.name] = true;
              });
              setItemToggles(allEnabled);
              setItemMode('disable');
            } else {
              // Disable all items
              const allDisabled = {};
              shoppingList.forEach(item => {
                allDisabled[item.name] = false;
              });
              setItemToggles(allDisabled);
              setItemMode('enable');
            }
          };

          const getItemButtonText = () => {
            switch (itemMode) {
              case 'enable': return 'Enable All';
              case 'disable': return 'Disable All';
              default: return 'Enable All';
            }
          };

          // Separate reset function
          const handleResetItems = () => {
            const defaultToggles = {};
            shoppingList.forEach(item => {
              defaultToggles[item.name] = item.category === 'Boil Essentials';
            });
            setItemToggles(defaultToggles);
            setItemMode('enable'); // Reset the cycling button to 'enable' state
          };




          // Music platform search links for zydeco
          const musicLinks = {
            spotify: {
              name: 'Spotify',
              url: 'https://open.spotify.com/search/zydeco',
              icon: '🎵'
            },
            apple: {
              name: 'Apple Music',
              url: 'https://music.apple.com/us/search?term=zydeco',
              icon: '🍎'
            },
            youtube: {
              name: 'YouTube Music',
              url: 'https://music.youtube.com/search?q=zydeco',
              icon: '📺'
            },
            amazon: {
              name: 'Amazon Music',
              url: 'https://music.amazon.com/search/zydeco',
              icon: '📦'
            }
          };


          // Compute current spice accent color and expose as CSS var "--spice" for uniform theming
          const spiceColor = SPICE_COLORS[Number(spiceLevel)] || SPICE_COLORS[3];
          const spiceStyle = { 
            ['--spice']: spiceColor
          };

          // Geolocation detection with localStorage persistence
          useEffect(() => {
            // Check if we have stored location preferences
            const storedLocation = localStorage.getItem('crawfish-calc-location');
            const storedRegion = localStorage.getItem('crawfish-calc-region');
            const storedStatus = localStorage.getItem('crawfish-calc-location-status');
            
            if (storedLocation && storedRegion && storedStatus) {
              // Use stored preferences
              setLocation(storedLocation);
              setDetectedRegion(storedRegion);
              setLocationStatus(storedStatus);
              
              // Auto-adjust lbs per person based on stored region
              setLbsPerPerson(getRegionalDefault(storedLocation));
              return;
            }
            
            // First time user - attempt geolocation
            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(
                (position) => {
                  const { latitude, longitude } = position.coords;
                  let detectedLoc, detectedReg;
                  
                  // Simple region detection based on coordinates
                  // Louisiana: roughly 29-33°N, 89-94°W
                  // Texas: roughly 25-36°N, 93-106°W
                  if (latitude >= 29 && latitude <= 33 && longitude >= -94 && longitude <= -89) {
                    detectedLoc = 'louisiana';
                    detectedReg = 'Louisiana';
                  } else if (latitude >= 25 && latitude <= 36 && longitude >= -106 && longitude <= -93) {
                    detectedLoc = 'texas';
                    detectedReg = 'Texas';
                  } else {
                    detectedLoc = 'other';
                    detectedReg = 'Other';
                  }
                  
                  // Store preferences
                  localStorage.setItem('crawfish-calc-location', detectedLoc);
                  localStorage.setItem('crawfish-calc-region', detectedReg);
                  localStorage.setItem('crawfish-calc-location-status', 'detected');
                  
                  setLocation(detectedLoc);
                  setDetectedRegion(detectedReg);
                  setLocationStatus('detected');
                  
                  // Auto-adjust lbs per person based on region
                  setLbsPerPerson(getRegionalDefault(detectedLoc));
                },
                (error) => {
                  console.log('Location access denied or error:', error);
                  
                  // Store that location was denied
                  localStorage.setItem('crawfish-calc-location', 'other');
                  localStorage.setItem('crawfish-calc-region', 'Other');
                  localStorage.setItem('crawfish-calc-location-status', 'denied');
                  
                  setLocation('other');
                  setDetectedRegion('Other');
                  setLocationStatus('denied');
                },
                { timeout: 10000, enableHighAccuracy: false }
              );
            } else {
              // Store that geolocation is not available
              localStorage.setItem('crawfish-calc-location', 'other');
              localStorage.setItem('crawfish-calc-region', 'Other');
              localStorage.setItem('crawfish-calc-location-status', 'error');
              
              setLocationStatus('error');
              setLocation('other');
              setDetectedRegion('Other');
            }
          }, []);

          

          useEffect(() => {
            try {
              setError(null);
              
              // Validate inputs
              const validPeopleCount = validatePeopleCount(peopleCount);
              const validLbsPerPerson = validateLbsPerPerson(lbsPerPerson);
              
              // Always use comprehensive advanced calculation
              const result = buildAdvancedItems({ 
                peopleCount: validPeopleCount, 
                lbsPerPerson: validLbsPerPerson, 
                location, 
                style,
                spiceLevel 
              });
              const items = result.items;
              const total = result.total;
              
              if (!items || !Array.isArray(items)) {
                throw new Error('Failed to generate shopping list items');
              }
              
              setShoppingList(items);
              
              // Initialize toggles for new items
              const newToggles = { ...itemToggles };
              items.forEach(item => {
                if (!(item.name in newToggles)) {
                  // Only enable main boil ingredients by default, others are off
                  newToggles[item.name] = item.category === 'Boil Essentials';
                }
              });
              setItemToggles(newToggles);
              setIsInitialized(true);
              
              // Calculate total with only enabled items
              const enabledTotal = items.reduce((sum, item) => {
                const isEnabled = newToggles[item.name] === true;
                const qty = Number(item.qty) || 0;
                const price = Number(item.price) || 0;
                return sum + (isEnabled ? qty * price : 0);
              }, 0);
              setTotalCost(enabledTotal);
              
            } catch (err) {
              console.error('Error calculating shopping list:', err);
              setError(`Error calculating shopping list: ${err.message}`);
              setShoppingList([]);
              setTotalCost(0);
            }
          }, [peopleCount, lbsPerPerson, location, style, spiceLevel]);

          // Update total when toggles change
          useEffect(() => {
            const enabledTotal = shoppingList.reduce((sum, item) => {
              const isEnabled = itemToggles[item.name] === true;
              return sum + (isEnabled ? Number(item.qty) * Number(item.price) : 0);
            }, 0);
            setTotalCost(enabledTotal);
          }, [itemToggles, shoppingList]);

          const toggleItem = (itemName) => {
            setItemToggles(prev => ({
              ...prev,
              [itemName]: !prev[itemName]
            }));
          };


          const toggleCategoryItems = (categoryTitle, enabled) => {
            const categoryItems = shoppingList.filter(item => item.category === categoryTitle);
            const newToggles = { ...itemToggles };
            categoryItems.forEach(item => {
              newToggles[item.name] = enabled;
            });
            setItemToggles(newToggles);
          };

          // New function for cycling category state (all-off -> all-on -> all-off)
          const cycleCategoryItems = (categoryTitle) => {
            const categoryItems = shoppingList.filter(item => item.category === categoryTitle);
            const enabledCount = categoryItems.filter(item => itemToggles[item.name] === true).length;
            
            // If all items are enabled, disable all. Otherwise, enable all.
            const shouldEnable = enabledCount !== categoryItems.length;
            toggleCategoryItems(categoryTitle, shouldEnable);
          };

          const resetAllToggles = () => {
            const allEnabled = {};
            shoppingList.forEach(item => {
              allEnabled[item.name] = true;
            });
            setItemToggles(allEnabled);
          };

          // Modern toast notification system
          const showToast = (message, type = 'success') => {
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-full';
            toast.style.background = type === 'success' 
              ? `linear-gradient(135deg, rgba(255, 255, 255, 0.85), var(--spice))`
              : 'linear-gradient(135deg, #dc3545, #b02a37)';
            toast.style.color = '#0b0b0b';
            toast.style.fontWeight = '600';
            toast.style.boxShadow = `0 0 15px rgba(255, 68, 0, 0.4), 0 8px 32px rgba(0,0,0,0.2)`;
            toast.style.border = type === 'success' 
              ? `1px solid rgba(255, 68, 0, 0.6)`
              : '1px solid #dc3545';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => {
              toast.style.transform = 'translateX(0)';
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
              toast.style.transform = 'translateX(full)';
              setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
          };

          // Modern export functions with multiple formats
          const exportAsText = () => {
            const enabledItems = shoppingList.filter(item => itemToggles[item.name] === true);
            const listText = [
              `CRAWFISH BOIL SHOPPING LIST`,
              `For ${peopleCount} people (${lbsPerPerson} lbs per person)`,
              ``,
              ...enabledItems.map(item => 
                `• ${formatQuantity(item.qty, item.unit)} ${item.unit} ${item.name} - $${(Number(item.qty) * Number(item.price)).toFixed(2)}`
              ),
              ``,
              `Total: $${Number(totalCost).toFixed(2)}`,
              ``,
              `Generated by Crawfish Boil Calculator`,
              `* Prices vary by season and location`
            ].join('\n');
            
            navigator.clipboard.writeText(listText).then(() => {
              showToast('Shopping list copied to clipboard!');
            }).catch(() => {
              // Fallback for older browsers
              const textArea = document.createElement('textarea');
              textArea.value = listText;
              document.body.appendChild(textArea);
              textArea.select();
              document.execCommand('copy');
              document.body.removeChild(textArea);
              showToast('Shopping list copied to clipboard!');
            });
          };

          const exportAsCSV = () => {
            const enabledItems = shoppingList.filter(item => itemToggles[item.name] === true);
            const csvData = [
              ['Item', 'Quantity', 'Unit', 'Unit Price', 'Total Price'],
              ...enabledItems.map(item => [
                item.name,
                formatQuantity(item.qty, item.unit),
                item.unit,
                `$${Number(item.price).toFixed(2)}`,
                `$${(Number(item.qty) * Number(item.price)).toFixed(2)}`
              ]),
              ['', '', '', 'Total:', `$${Number(totalCost).toFixed(2)}`]
            ];
            
            const csvContent = csvData.map(row => 
              row.map(cell => `"${cell}"`).join(',')
            ).join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `crawfish-boil-list-${peopleCount}people.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast('CSV file downloaded!');
          };

          const exportAsJSON = () => {
            const enabledItems = shoppingList.filter(item => itemToggles[item.name] === true);
            const jsonData = {
              metadata: {
                title: "Crawfish Boil Shopping List",
                peopleCount,
                lbsPerPerson,
                totalCost: Number(totalCost).toFixed(2),
                generated: new Date().toISOString()
              },
              items: enabledItems.map(item => ({
                name: item.name,
                quantity: formatQuantity(item.qty, item.unit),
                unit: item.unit,
                unitPrice: Number(item.price).toFixed(2),
                totalPrice: (Number(item.qty) * Number(item.price)).toFixed(2)
              }))
            };
            
            const blob = new Blob([JSON.stringify(jsonData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `crawfish-boil-list-${peopleCount}people.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast('JSON file downloaded!');
          };

          const shareList = async () => {
            const enabledItems = shoppingList.filter(item => itemToggles[item.name] === true);
            const listText = [
              `CRAWFISH BOIL SHOPPING LIST`,
              `For ${peopleCount} people (${lbsPerPerson} lbs per person)`,
              ``,
              ...enabledItems.map(item => 
                `• ${formatQuantity(item.qty, item.unit)} ${item.unit} ${item.name} - $${(Number(item.qty) * Number(item.price)).toFixed(2)}`
              ),
              ``,
              `Total: $${Number(totalCost).toFixed(2)}`
            ].join('\n');

            if (navigator.share) {
              try {
                await navigator.share({
                  title: 'Crawfish Boil Shopping List',
                  text: listText
                });
                showToast('List shared successfully!');
              } catch (err) {
                if (err.name !== 'AbortError') {
                  exportAsText(); // Fallback to copy
                }
              }
            } else {
              exportAsText(); // Fallback to copy
            }
          };

          // Legacy function name for backward compatibility
          const exportShoppingList = exportAsText;

          const renderShoppingItem = (item, index, keyPrefix = '') => {
            // Don't render anything until properly initialized
            if (!isInitialized) {
              return null;
            }
            
            // Check if item is enabled based on toggle state
            const isEnabled = itemToggles[item.name] === true;
            
            // Force explicit class calculation
            const buttonClasses = isEnabled ? 'mg-toggle-btn enabled' : 'mg-toggle-btn disabled';
            
            return React.createElement('li', {
              key: `${keyPrefix}${index}`,
              className: `bg-white/5 p-2 sm:p-3 rounded-lg flex items-center gap-2 sm:gap-3 mobile-item-row ${!isEnabled ? 'mg-item-disabled' : ''}`
            },
              React.createElement('button', {
                className: buttonClasses,
                style: {
                  background: isEnabled 
                    ? 'linear-gradient(135deg, rgba(255, 255, 255, 0.85), var(--spice))'
                    : 'rgba(255,255,255,0.1)',
                  boxShadow: isEnabled 
                    ? '0 0 8px rgba(255, 68, 0, 0.4)'
                    : 'none',
                  position: 'relative',
                  width: '44px',
                  height: '24px',
                  borderRadius: '12px',
                  border: 'none',
                  cursor: 'pointer',
                  transition: 'all 0.3s ease'
                },
                onClick: () => toggleItem(item.name),
                title: `Toggle ${item.name}`,
                "aria-label": `Toggle ${item.name} - currently ${isEnabled ? 'enabled' : 'disabled'}`,
                "aria-pressed": isEnabled,
                role: "switch"
              },
                // Add the sliding circle element
                React.createElement('div', {
                  style: {
                    position: 'absolute',
                    top: '2px',
                    left: isEnabled ? '22px' : '2px',
                    width: '20px',
                    height: '20px',
                    borderRadius: '50%',
                    background: isEnabled ? 'white' : '#999',
                    transition: 'all 0.3s ease'
                  }
                })
              ),
              React.createElement('div', { className: "flex-1 flex flex-col gap-1 sm:gap-2" },
                React.createElement('span', { className: "mg-item-text" },
                  `${formatQuantity(item.qty, item.unit)} ${item.unit} ${item.name}`
                )
              ),
              React.createElement('span', { className: "mg-price font-semibold" },
                `$${(Number(item.qty) * Number(item.price)).toFixed(2)}`
              )
            );
          };

          const printShoppingList = () => {
            const enabledItems = shoppingList.filter(item => itemToggles[item.name] === true);
            const categorized = categorizeShoppingList(enabledItems);
            
            const printWindow = window.open('', '_blank');
            const printContent = `
              <html>
                <head>
                  <title>Crawfish Boil Shopping List</title>
                  <style>
                    @media print {
                      body { margin: 0; }
                      .no-print { display: none; }
                    }
                    body { 
                      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
                      padding: 30px; 
                      max-width: 800px; 
                      margin: 0 auto;
                      line-height: 1.6;
                      color: #1f2937;
                    }
                    h1 { 
                      color: #dc2626; 
                      border-bottom: 3px solid #dc2626; 
                      padding-bottom: 10px;
                      font-family: 'Bungee', cursive;
                      font-size: 2em;
                      text-align: center;
                    }
                    h2 {
                      color: #374151;
                      margin-top: 30px;
                      margin-bottom: 15px;
                      font-size: 1.3em;
                      border-left: 4px solid #f59e0b;
                      padding-left: 12px;
                    }
                    .meta { 
                      text-align: center; 
                      font-size: 1.1em; 
                      color: #6b7280; 
                      margin-bottom: 30px;
                    }
                    .section {
                      margin-bottom: 25px;
                    }
                    .item { 
                      display: flex; 
                      justify-content: space-between; 
                      align-items: center;
                      padding: 12px 15px; 
                      border-bottom: 1px solid #e5e7eb;
                      background: #f9fafb;
                      margin-bottom: 2px;
                    }
                    .item:hover {
                      background: #f3f4f6;
                    }
                    .item-name {
                      font-weight: 500;
                    }
                    .item-qty {
                      color: #6b7280;
                      font-size: 0.9em;
                    }
                    .item-price {
                      font-weight: 600;
                      color: #059669;
                    }
                    .total { 
                      font-weight: bold; 
                      font-size: 1.3em; 
                      margin-top: 25px; 
                      padding: 15px;
                      background: #fef3c7;
                      border: 2px solid #f59e0b;
                      border-radius: 8px;
                      text-align: center;
                    }
                    .disclaimer { 
                      color: #6b7280; 
                      font-style: italic; 
                      margin-top: 20px; 
                      font-size: 0.9em;
                      text-align: center;
                    }
                    .print-btn {
                      background: #dc2626;
                      color: white;
                      border: none;
                      padding: 12px 24px;
                      border-radius: 6px;
                      font-size: 1em;
                      cursor: pointer;
                      margin: 20px auto;
                      display: block;
                    }
                    .print-btn:hover {
                      background: #b91c1c;
                    }
                  </style>
                  <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
                </head>
                <body>
                  <h1>🦞 Crawfish Boil Shopping List</h1>
                  <div class="meta">
                    <strong>For ${peopleCount} people (${lbsPerPerson} lbs per person)</strong><br>
                    Generated on ${new Date().toLocaleDateString()}
                  </div>
                  
                  <div class="section">
                    <h2>🥘 Food & Ingredients</h2>
                    ${categorized.foodstuffs.map(item => 
                      `<div class="item">
                        <div>
                          <div class="item-name">${item.name}</div>
                          <div class="item-qty">${formatQuantity(item.qty, item.unit)} ${item.unit}</div>
                        </div>
                        <div class="item-price">$${(Number(item.qty) * Number(item.price)).toFixed(2)}</div>
                      </div>`
                    ).join('')}
                  </div>
                  
                  <div class="section">
                    <h2>🔧 Equipment & Supplies</h2>
                    ${categorized.nonFoodstuffs.map(item => 
                      `<div class="item">
                        <div>
                          <div class="item-name">${item.name}</div>
                          <div class="item-qty">${formatQuantity(item.qty, item.unit)} ${item.unit}</div>
                        </div>
                        <div class="item-price">$${(Number(item.qty) * Number(item.price)).toFixed(2)}</div>
                      </div>`
                    ).join('')}
                  </div>
                  
                  <div class="total">
                    Total Cost: $${Number(totalCost).toFixed(2)}
                  </div>
                  
                  <div class="disclaimer">
                    * Prices vary by season and location<br>
                    Generated by Crawfish Boil Calculator
                  </div>
                  
                  <button class="print-btn no-print" onclick="window.print()">🖨️ Print This List</button>
                </body>
              </html>
            `;
            printWindow.document.write(printContent);
            printWindow.document.close();
            showToast('Print preview opened!');
          };

          return React.createElement(React.Fragment, {},
            React.createElement('link', {
              href: "https://fonts.googleapis.com/css2?family=Bungee&family=Inter:wght@400;600;700&display=swap",
              rel: "stylesheet"
            }),
            React.createElement('style', {}, `
              :root{
                --ember-black:#0b0b0b; --ember-deep:#141414; --ember-red:#FF3D00; --ember-glow:#FF7043; --ember-dim:#bdbdbd;
              }
              .font-display{ font-family: 'Bungee', system-ui, sans-serif; }
              .font-body{ font-family: 'Inter', system-ui, sans-serif; }
              /* Header gradient, total text, etc. bind to current --spice for uniform coloring */
              .mg-gradient-text{ background: linear-gradient(90deg, rgba(255, 255, 255, 0.8), var(--spice)); -webkit-background-clip: text; background-clip: text; color: transparent; text-shadow: 0 0 10px rgba(255, 68, 0, 0.45); }
              .mg-card {
                background:
                  radial-gradient(1000px 600px at 20% -10%, rgba(255, 68, 0, 0.2), transparent 60%),
                  radial-gradient(900px 700px at 80% 120%, rgba(255, 68, 0, 0.15), transparent 60%),
                  #0f0f0f;
              }
              .mg-border { box-shadow: 0 0 10px rgba(255, 68, 0, 0.6), 0 0 40px rgba(255, 68, 0, 0.25); }
              .mg-toggle > button { border-radius: 0.75rem; flex:1; padding: 0.75rem 1rem; font-weight: 700; min-height: 44px; }
              .mg-toggle .active { background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), var(--spice)); color: #0b0b0b; box-shadow: 0 0 12px rgba(255, 68, 0, 0.4); }
              .mg-toggle .inactive { background: rgba(255,255,255,0.05); color: #eee; }
              .mg-label { color: #f5f5f5; font-weight: 700; }
              .mg-slider { accent-color: var(--spice); box-shadow: 0 0 10px rgba(255, 68, 0, 0.35); border-radius: 999px; }
              .mg-chip { background: rgba(255, 68, 0, 0.18); color: var(--spice); border: 1px solid rgba(255, 68, 0, 0.6); }
              /* Inferno pulsing animation */
              @keyframes inferno-pulse {
                0%, 100% { 
                  box-shadow: 0 0 10px rgba(255, 68, 0, 0.35), 
                             0 0 20px rgba(255, 68, 0, 0.15);
                }
                50% { 
                  box-shadow: 0 0 15px rgba(255, 68, 0, 0.5), 
                             0 0 30px rgba(255, 68, 0, 0.25),
                             0 0 40px rgba(139, 0, 64, 0.2);
                }
              }
              .mg-slider.inferno-pulse { 
                animation: inferno-pulse 2s ease-in-out infinite;
              }
              .mg-border.inferno-pulse {
                animation: inferno-pulse 2.5s ease-in-out infinite;
              }
              .mg-chip.inferno-pulse {
                animation: inferno-pulse 1.8s ease-in-out infinite;
              }
              .no-spinner::-webkit-outer-spin-button,
              .no-spinner::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
              }
              .no-spinner[type=number] {
                -moz-appearance: textfield;
              }
              .mg-item-text { color: #f5f5f5; }
              .mg-price { color: #f5f5f5; font-weight: 600; }
              .mg-item-disabled { opacity: 0.4; }
              .mg-item-disabled .mg-item-text { color: #888; }
              .mg-item-disabled .mg-price { color: #888; }
              /* TOGGLE BUTTON STYLES - HIGH SPECIFICITY */
              button.mg-toggle-btn,
              button.mg-toggle-btn.disabled { 
                width: 44px !important; height: 24px !important; border-radius: 12px !important; 
                border: none !important; cursor: pointer !important; 
                transition: all 0.3s ease !important; position: relative !important; flex-shrink: 0 !important;
                min-width: 44px !important; min-height: 24px !important; 
                display: flex !important; align-items: center !important; justify-content: center !important;
                padding: 0 !important; -webkit-tap-highlight-color: transparent !important; margin: 0 !important;
                /* FORCE disabled appearance */
                background: rgba(255,255,255,0.1) !important;
                box-shadow: none !important;
              }
              button.mg-toggle-btn.enabled { 
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), var(--spice)) !important; 
                box-shadow: 0 0 8px rgba(255, 68, 0, 0.4) !important;
              }
              button.mg-toggle-btn::after,
              button.mg-toggle-btn.disabled::after {
                content: '' !important; position: absolute !important; top: 2px !important; 
                width: 20px !important; height: 20px !important; 
                border-radius: 50% !important; background: #999 !important; 
                transition: all 0.3s ease !important;
                /* FORCE disabled position */
                left: 2px !important;
              }
              button.mg-toggle-btn.enabled::after { 
                left: 22px !important; 
                background: white !important; 
              }
              
              /* Enhanced mobile styles */
              .mg-input-enhanced {
                font-size: 16px !important; /* Prevents zoom on iOS */
                padding: 12px 16px; border-radius: 12px; transition: all 0.2s ease;
                -webkit-tap-highlight-color: transparent;
              }
              
              .mg-btn-enhanced {
                min-height: 44px; min-width: 44px; padding: 12px 16px; font-size: 14px;
                border-radius: 8px; transition: all 0.2s ease; -webkit-tap-highlight-color: transparent;
              }

              /* Mobile responsive improvements */
              @media (max-width: 640px) {
                .mg-card { margin: 0.25rem; max-width: calc(100vw - 0.5rem); }
                .mg-item-text { font-size: 15px; line-height: 1.3; }
                .mg-price { font-size: 14px; }
                .mg-gradient-text { line-height: 1.1; font-size: 1.5rem; }
                .mg-toggle { gap: 0.25rem; }
                .mg-toggle > button { padding: 0.6rem 0.8rem; font-size: 14px; min-height: 44px; }
                input[type="range"] { height: 36px; }
                .mobile-button-group { flex-direction: column; gap: 0.375rem; }
                .mobile-button-group button { width: 100%; min-height: 44px; font-size: 14px; padding: 0.6rem 1rem; }
                .mobile-category-header { padding: 0.5rem 0.25rem; }
                .mobile-category-title { font-size: 1rem; min-height: 44px; }
                .mobile-item-row { padding: 0.5rem; gap: 0.5rem; }
                
                /* Tighter spacing for inputs */
                .mg-input-enhanced { padding: 10px 12px; font-size: 16px; }
                
                /* Compact sliders */
                input[type="range"] { margin: 0.25rem 0; }
                
                /* Smaller text on mobile for better density */
                .mg-label { font-size: 14px; }
                .mg-chip { font-size: 12px; padding: 0.25rem 0.5rem; }
              }

              /* Touch-friendly interactive elements */
              button, input, select, textarea {
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
              }

              /* Prevent zoom on input focus for iOS */
              input, select, textarea {
                font-size: 16px !important;
              }

              /* Ultra-smooth mobile experience */
              @media (max-width: 640px) {
                /* Reduce animation intensity on mobile for better performance */
                .inferno-pulse {
                  animation-duration: 3s !important;
                }
                
                /* Tighter header spacing */
                h1 { font-size: 1.875rem; line-height: 1.2; margin-bottom: 0.5rem; }
                h2 { font-size: 1.25rem; line-height: 1.3; }
                
                /* Streamlined total display */
                .total-display { font-size: 1.25rem; margin-top: 1rem; }
                
                /* Sticky controls for mobile */
                .mobile-sticky-controls {
                  position: sticky;
                  top: 0;
                  z-index: 10;
                  background: rgba(15, 15, 15, 0.95);
                  backdrop-filter: blur(10px);
                  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                  margin: -0.5rem -0.5rem 1rem -0.5rem;
                  padding: 0.75rem;
                  border-radius: 0 0 1rem 1rem;
                }
              }

              /* Enhanced visual hierarchy */
              .section-divider {
                margin: 2rem 0 1.5rem 0;
                padding: 0.5rem 0;
                border-bottom: 2px solid rgba(255, 68, 0, 0.3);
                position: relative;
              }
              
              .section-divider::before {
                content: '';
                position: absolute;
                bottom: -2px;
                left: 0;
                width: 60px;
                height: 2px;
                background: var(--spice);
                box-shadow: 0 0 8px rgba(255, 68, 0, 0.5);
              }
              

              /* Desktop two-column layout */
              @media (min-width: 1024px) {
                .desktop-layout {
                  display: grid;
                  grid-template-columns: 400px 1fr;
                  gap: 2rem;
                  max-width: 1400px;
                  margin: 0 auto;
                }
                
                .controls-column {
                  position: sticky;
                  top: 1rem;
                  height: fit-content;
                }
                
                .results-column {
                  min-height: 100vh;
                }
              }


              /* Loading and transition states */
              .fade-in {
                animation: fadeIn 0.5s ease-in-out;
              }
              
              @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
              }
              
              .loading-shimmer {
                background: linear-gradient(90deg, 
                  rgba(255,255,255,0.1) 25%, 
                  rgba(255,255,255,0.2) 50%, 
                  rgba(255,255,255,0.1) 75%);
                background-size: 200% 100%;
                animation: shimmer 1.5s infinite;
              }
              
              @keyframes shimmer {
                0% { background-position: -200% 0; }
                100% { background-position: 200% 0; }
              }
              
              /* Enhanced interactions */
              .interactive-hover {
                transition: all 0.2s ease;
              }
              
              .interactive-hover:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
              }

              

              /* Theme-adaptive styles */
              .themed-element {
                background: var(--theme-card-bg, #0f0f0f) !important;
                color: var(--theme-text, #f5f5f5) !important;
                border-color: var(--theme-border, rgba(255,255,255,0.1)) !important;
              }
              
              .themed-bg {
                background: var(--theme-bg, #0b0b0b) !important;
              }

              /* Override hardcoded colors */
              .mg-label {
                color: var(--theme-text, #f5f5f5) !important;
              }
              
              .mg-chip {
                background: rgba(255, 68, 0, 0.18) !important;
                color: var(--spice) !important;
                border: 1px solid rgba(255, 68, 0, 0.6) !important;
              }
              
              .mg-toggle .inactive {
                background: var(--theme-accent, rgba(255,255,255,0.05)) !important;
                color: var(--theme-text-secondary, #eee) !important;
              }
              
              .mg-toggle .active {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), var(--spice)) !important;
                color: var(--theme-bg, #0b0b0b) !important;
              }
              
              .mg-item-text {
                color: var(--theme-text, #f5f5f5) !important;
              }
              
              .mg-price {
                color: var(--spice) !important;
              }
              
              .bg-white\\/5 {
                background: var(--theme-accent, rgba(255,255,255,0.05)) !important;
              }
              
              .text-gray-100 {
                color: var(--theme-text, #f5f5f5) !important;
              }
              
              .text-gray-300 {
                color: var(--theme-text-secondary, #ccc) !important;
              }
              
              .text-gray-400 {
                color: var(--theme-text-secondary, #999) !important;
              }
              
              .border-white\\/10 {
                border-color: var(--theme-border, rgba(255,255,255,0.1)) !important;
              }
              
              .mg-toggle > button {
                min-height: 48px; padding: 12px 16px; font-size: 14px; border-radius: 12px;
                -webkit-tap-highlight-color: transparent;
              }
              
              .mg-slider {
                height: 8px; -webkit-appearance: none; appearance: none; outline: none; border-radius: 4px;
              }
              
              .mg-slider::-webkit-slider-thumb {
                -webkit-appearance: none; appearance: none; width: 24px; height: 24px; border-radius: 50%;
                background: var(--spice); cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
              }
              
              .mg-slider::-moz-range-thumb {
                width: 24px; height: 24px; border-radius: 50%; background: var(--spice);
                cursor: pointer; border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
              }
              .mg-item-disabled { opacity: 0.4; }
              .mg-item-disabled .mg-item-text { color: #666; }
              .mg-item-disabled .mg-price { color: #666; text-shadow: none; }
              
              /* Accessibility improvements */
              @media (prefers-reduced-motion: reduce) {
                * { transition: none !important; animation: none !important; }
              }
              
              /* Focus indicators for keyboard navigation */
              button:focus-visible, input:focus-visible {
                outline: 2px solid var(--spice);
                outline-offset: 2px;
              }
              
              /* High contrast mode support */
              @media (prefers-contrast: high) {
                .mg-toggle-btn.disabled { background: #333; }
                .mg-item-disabled { opacity: 0.6; }
              }
            `),

            React.createElement('div', {
              className: `font-body flex justify-center items-start p-1 sm:p-3`,
              style: { 
                minHeight: '100vh', 
                margin: 0, 
                padding: '0.25rem', 
                background: '#0b0b0b',
                color: '#f5f5f5',
                ...spiceStyle 
              }
            },
              React.createElement(Card, {
                className: `mg-card mg-border max-w-2xl w-full rounded-xl p-2 sm:p-3 md:p-4${Number(spiceLevel) === 5 ? ' inferno-pulse' : ''}`,
                role: "main",
                "aria-label": "Crawfish Boil Calculator"
              },
                React.createElement(CardContent, {},
                  // Header
                  React.createElement('div', { className: "text-center mb-4" },
                    React.createElement('h1', {
                      className: "font-display text-lg sm:text-xl md:text-2xl lg:text-3xl mg-gradient-text drop-shadow flex items-center justify-center gap-1 sm:gap-2 md:gap-3"
                    }, 
                    React.createElement('span', { className: "text-xl sm:text-2xl md:text-3xl" }, "🦞"),
                    "CRAWFISH BOIL CALCULATOR",
                    React.createElement('span', { className: "text-xl sm:text-2xl md:text-3xl" }, "🦞")
                    )
                  ),

                  // Style selector
                  React.createElement('div', { className: "mb-4" },
                    React.createElement('label', { className: "mg-label block mb-2" }, "Boil Style"),
                    React.createElement('div', { 
                      className: "mg-toggle flex gap-1 sm:gap-2 p-1 rounded-xl",
                      style: { background: 'rgba(255,255,255,0.05)' }
                    },
                      React.createElement('button', {
                        className: style === 'cajun' ? 'active' : 'inactive',
                        onClick: () => setStyle('cajun')
                      }, CONFIG.boilStyles.cajun.name),
                      React.createElement('button', {
                        className: style === 'vietcajun' ? 'active' : 'inactive',
                        onClick: () => setStyle('vietcajun')
                      }, CONFIG.boilStyles.vietcajun.name),
                      React.createElement('button', {
                        className: style === 'texorleans' ? 'active' : 'inactive',
                        onClick: () => setStyle('texorleans')
                      }, CONFIG.boilStyles.texorleans.name)
                    )
                  ),

                  // Location Status Indicator - More compact
                  locationStatus !== 'detecting' && React.createElement('div', { 
                    className: "mb-3 p-2 rounded text-center text-xs",
                    style: { 
                      background: 'rgba(255,255,255,0.05)',
                      color: '#eee'
                    }
                  },
                    locationStatus === 'detected' && React.createElement('span', { className: "text-green-400" }, `📍 ${detectedRegion} pricing`),
                    locationStatus === 'denied' && React.createElement('span', { className: "text-yellow-400" }, "📍 Estimated pricing (location denied)"),
                    locationStatus === 'error' && React.createElement('span', { className: "text-yellow-400" }, "📍 Estimated pricing")
                  ),

                  // Error Display
                  error && React.createElement('div', { 
                    className: "mb-4 p-3 rounded-lg border",
                    style: {
                      background: themeMode === 'light' || themeMode === 'bw' ? 'rgba(220, 53, 69, 0.1)' : 'rgba(220, 53, 69, 0.2)',
                      borderColor: themeMode === 'light' || themeMode === 'bw' ? 'rgba(220, 53, 69, 0.4)' : 'rgba(220, 53, 69, 0.3)'
                    }
                  },
                    React.createElement('div', { className: "flex items-center gap-2" },
                      React.createElement('span', { 
                        className: "text-lg",
                        style: { color: themeMode === 'bw' ? '#666' : '#dc3545' }
                      }, "⚠️"),
                      React.createElement('div', { 
                        className: "text-sm",
                        style: { color: themeMode === 'bw' ? '#333' : themeMode === 'light' ? '#dc3545' : '#f8d7da' }
                      }, error)
                    )
                  ),


                  React.createElement('div', { className: "space-y-2 sm:space-y-3" },

                    React.createElement('div', {},
                      React.createElement('div', { className: "flex items-center justify-between mb-1" },
                        React.createElement('label', { className: "mg-label" }, "Number of People"),
                        React.createElement('div', { className: "mg-chip px-2 py-0.5 rounded text-sm font-semibold flex items-center gap-1" },
                          React.createElement('input', { 
                            type: 'number',
                            value: peopleCount,
                            onChange: (e) => setValidatedPeopleCount(Number(e.target.value) || 0),
                            className: "bg-transparent border-0 outline-none text-center font-semibold no-spinner min-h-[32px] sm:min-h-auto",
                            style: { 
                              color: 'inherit',
                              width: `${Math.max(3, peopleCount.toString().length + 0.5)}ch`,
                              minWidth: '3ch'
                            },
                            min: 1,
                            onBlur: (e) => {
                              const value = Number(e.target.value);
                              if (value < 1) setValidatedPeopleCount(1);
                            }
                          }),
                          React.createElement('span', {}, 'people')
                        )
                      ),
                      React.createElement('input', {
                        type: "range",
                        min: "0",
                        max: "100",
                        value: peopleCountToSlider(peopleCount),
                        onChange: (e) => setValidatedPeopleCount(sliderToPeopleCount(Number(e.target.value))),
                        className: `mg-slider w-full mb-2 sm:mb-3${Number(spiceLevel) === 5 ? ' inferno-pulse' : ''}`,
                        "aria-label": `Number of people: ${peopleCount}`,
                        "aria-valuemin": "0",
                        "aria-valuemax": "100000",
                        "aria-valuenow": peopleCount,
                        "aria-valuetext": `${peopleCount} people`
                      }),
                    ),

                    React.createElement('div', {},
                      React.createElement('div', { className: "flex items-center justify-between mb-1" },
                        React.createElement('label', { className: "mg-label" }, "Pounds per Person"),
                        React.createElement('div', { className: "mg-chip px-2 py-0.5 rounded text-sm font-semibold flex items-center gap-1" },
                          React.createElement('input', { 
                            type: 'number',
                            value: lbsPerPerson,
                            onChange: (e) => setLbsPerPerson(Number(e.target.value) || 0),
                            className: "bg-transparent border-0 outline-none text-center w-12 font-semibold no-spinner min-h-[32px] sm:min-h-auto",
                            style: { color: 'inherit' },
                            min: 0,
                            max: 10,
                            step: 0.5,
                            onBlur: (e) => {
                              const value = Number(e.target.value);
                              if (value < 0.5) setLbsPerPerson(0.5);
                              if (value > 10) setLbsPerPerson(10);
                            }
                          }),
                          React.createElement('span', {}, 'lbs')
                        )
                      ),
                      React.createElement('div', { className: "text-xs text-gray-400 mb-2" }, 
                        `${detectedRegion === 'Louisiana' ? '3.5' : detectedRegion === 'Texas' ? '3.0' : '2.5'} lbs recommended for ${detectedRegion}`
                      ),
                      React.createElement('input', {
                        type: "range",
                        min: "0.5",
                        max: "5.5",
                        step: "0.5",
                        value: Number(lbsPerPerson),
                        onChange: (e) => setValidatedLbsPerPerson(Number(e.target.value)),
                        className: `mg-slider w-full mb-2 sm:mb-3${Number(spiceLevel) === 5 ? ' inferno-pulse' : ''}`,
                        "aria-label": `Pounds per person: ${lbsPerPerson}`,
                        "aria-valuemin": "0",
                        "aria-valuemax": "5.5",
                        "aria-valuenow": lbsPerPerson,
                        "aria-valuetext": `${lbsPerPerson} pounds per person`
                      }),
                    ),

                    React.createElement('div', {},
                      React.createElement('div', { className: "flex items-center justify-between mb-1" },
                        React.createElement('label', { className: "mg-label" }, "Spice Level"),
                        React.createElement('span', { className: `mg-chip px-2 py-0.5 rounded text-sm font-semibold${Number(spiceLevel) === 5 ? ' inferno-pulse' : ''}` }, CONFIG.spiceLevels[Number(spiceLevel)].name)
                      ),
                      React.createElement('input', {
                        type: "range",
                        min: "1",
                        max: "5",
                        value: Number(spiceLevel),
                        onChange: (e) => setValidatedSpiceLevel(Number(e.target.value)),
                        className: `mg-slider w-full${Number(spiceLevel) === 5 ? ' inferno-pulse' : ''}`,
                        "aria-label": `Spice level: ${CONFIG.spiceLevels[spiceLevel].name}`,
                        "aria-valuemin": "1",
                        "aria-valuemax": "5",
                        "aria-valuenow": spiceLevel,
                        "aria-valuetext": CONFIG.spiceLevels[spiceLevel].name
                      })
                    ),

                  React.createElement('div', { className: "section-divider" },
                    React.createElement('h2', { className: "font-display text-lg sm:text-xl md:text-2xl mg-gradient-text" }, "Shopping List")
                  ),
                  React.createElement('div', { className: "mt-4" },
                    React.createElement('div', { className: "flex items-center justify-between mb-2 sm:mb-3 flex-col sm:flex-row gap-2 sm:gap-0" },
                      React.createElement('div', {}), // Empty div to maintain layout
                      React.createElement('div', { className: "flex gap-2 sm:flex-row flex-col mobile-button-group" },
                        React.createElement('button', {
                          onClick: handleCyclingAction,
                          className: "mg-btn-enhanced px-3 py-2 sm:py-1 rounded-xl transition-all text-sm min-h-[44px] sm:min-h-auto font-semibold",
                          style: {
                            background: `linear-gradient(135deg, rgba(255, 255, 255, 0.85), var(--spice))`,
                            color: 'var(--theme-bg)',
                            border: '1px solid var(--spice)',
                            boxShadow: '0 0 8px rgba(255, 68, 0, 0.4)'
                          },
                          title: "Click to cycle: Expand All → Collapse All"
                        }, getActionButtonText()),
                        React.createElement('button', {
                          onClick: handleItemCycling,
                          className: "mg-btn-enhanced px-3 py-2 sm:py-1 rounded-xl transition-all text-sm min-h-[44px] sm:min-h-auto font-semibold",
                          style: {
                            background: 'var(--theme-accent)',
                            color: 'var(--theme-text)',
                            border: '1px solid var(--theme-border)',
                            boxShadow: '0 0 4px rgba(255, 255, 255, 0.2)'
                          },
                          title: "Click to cycle: Enable All → Disable All"
                        }, getItemButtonText()),
                        React.createElement('button', {
                          onClick: handleResetItems,
                          className: "mg-btn-enhanced px-3 py-2 sm:py-1 rounded-xl transition-all text-sm min-h-[44px] sm:min-h-auto font-semibold",
                          style: {
                            background: '#DC2626',
                            color: 'white',
                            border: '1px solid #DC2626',
                            boxShadow: '0 0 4px rgba(220, 38, 38, 0.3)'
                          },
                          title: "Reset to default (only Boil Essentials enabled)"
                        }, "Reset")
                      )
                    ),
                    // Show loading or shopping list
                    !isInitialized ? React.createElement('div', { 
                      className: "text-center py-8 text-gray-400" 
                    }, "Loading shopping list...") :
                    // Comprehensive categorized shopping list with defined order
                    (() => {
                      // Define display order: Food items first, then Non-foodstuff
                      const categoryOrder = [
                        // Food items
                        'must-have',
                        'seasonings', 
                        'proteins-seafood',
                        'vegetables',
                        'side-dishes-condiments',
                        'desserts',
                        'beverages',
                        // Non-foodstuff items  
                        'equipment-tools',
                        'serving-party-setup',
                        'comfort-safety',
                        'entertainment-lighting',
                        'cleanup-waste'
                      ];
                      
                      const styleItems = ADVANCED_ITEMS[style] || ADVANCED_ITEMS.cajun;
                      
                      return categoryOrder.filter(categoryKey => styleItems[categoryKey]).map(categoryKey => {
                        const category = styleItems[categoryKey];
                        const categoryItems = shoppingList.filter(item => item.category === category.title);
                        if (categoryItems.length === 0) return null;
                        
                        return React.createElement('div', {
                          key: categoryKey,
                          className: "mb-2 sm:mb-4"
                        },
                          React.createElement('div', { 
                            className: "flex items-center justify-between mb-2 sm:mb-3 mobile-category-header"
                          },
                            React.createElement('div', { className: "flex items-center gap-2" },
                              React.createElement('button', {
                                onClick: () => toggleCategory(categoryKey),
                                className: "hover:bg-white/5 p-2 sm:p-1 rounded transition-colors min-h-[44px] sm:min-h-auto min-w-[44px] sm:min-w-auto flex items-center justify-center"
                              },
                                React.createElement('span', { className: "text-lg" }, 
                                  categoryExpanded[categoryKey] ? '▼' : '▶'
                                )
                              ),
                              React.createElement('button', {
                                onClick: () => toggleCategory(categoryKey),
                                className: "font-semibold text-lg mg-gradient-text hover:bg-white/5 px-2 py-2 sm:py-1 rounded transition-colors text-left mobile-category-title min-h-[44px] sm:min-h-auto flex items-center"
                              }, category.title)
                            )
                          ),
                          categoryExpanded[categoryKey] && React.createElement('ul', { className: "space-y-0.5 sm:space-y-1" },
                            categoryItems.map((item, i) => renderShoppingItem(item, i, `${categoryKey}-`))
                          )
                        );
                      });
                    })(),
                    React.createElement('div', { 
                      className: "sticky bottom-0 bg-black/90 backdrop-blur-sm border-t border-white/10 p-3 mt-4 rounded-t-xl text-center font-display text-xl md:text-2xl z-10" 
                    },
                      React.createElement('span', { className: "mg-gradient-text" }, `Total: $${Number(totalCost).toFixed(2)}`)
                    ),
                    
                    // Amazon Shopping Section
                    React.createElement('div', { className: "mt-6 border-t border-white/10 pt-4" },
                      React.createElement('button', {
                        onClick: () => setAmazonSectionExpanded(!amazonSectionExpanded),
                        className: "flex items-center justify-between w-full hover:bg-white/5 p-3 rounded transition-colors min-h-[44px]"
                      },
                        React.createElement('h2', { className: "font-display text-lg sm:text-xl md:text-2xl mg-gradient-text" }, "🛒 Amazon Shopping"),
                        React.createElement('span', { className: "text-lg" }, amazonSectionExpanded ? '▼' : '▶')
                      ),
                      amazonSectionExpanded && React.createElement('div', {},
                        React.createElement('p', { className: "text-gray-300 text-sm mb-4 mt-3" },
                          "Buy items from your shopping list on Amazon:"
                        ),
                        
                        (() => {
                          // Get enabled items with Amazon search terms
                          const enabledAmazonItems = shoppingList.filter(item => 
                            itemToggles[item.name] === true && item.amazonSearch
                          );
                          
                          if (enabledAmazonItems.length === 0) {
                            return React.createElement('div', { className: "text-center py-8 text-gray-400" },
                              React.createElement('p', {}, "No Amazon items in your current shopping list."),
                              React.createElement('p', { className: "text-sm mt-2" }, "Enable equipment, seasonings, or specialty items above to see Amazon shopping options.")
                            );
                          }
                          
                          // Group items by category type for better organization
                          const equipmentItems = enabledAmazonItems.filter(item => 
                            item.amazonSearch.includes('burner') || 
                            item.amazonSearch.includes('paddle') || 
                            item.amazonSearch.includes('tongs') || 
                            item.amazonSearch.includes('gloves') || 
                            item.amazonSearch.includes('skimmer') || 
                            item.amazonSearch.includes('washer') || 
                            item.amazonSearch.includes('hose') || 
                            item.amazonSearch.includes('regulator') || 
                            item.amazonSearch.includes('propane') ||
                            item.amazonSearch.includes('extinguisher') ||
                            item.amazonSearch.includes('table') ||
                            item.amazonSearch.includes('chair') ||
                            item.amazonSearch.includes('tent') ||
                            item.amazonSearch.includes('canopy') ||
                            item.amazonSearch.includes('extension cord') ||
                            item.amazonSearch.includes('cooler') ||
                            item.amazonSearch.includes('speaker') ||
                            item.amazonSearch.includes('cornhole') ||
                            item.amazonSearch.includes('ladder toss') ||
                            item.amazonSearch.includes('jenga') ||
                            item.amazonSearch.includes('horseshoe') ||
                            item.amazonSearch.includes('frisbee') ||
                            item.amazonSearch.includes('football') ||
                            item.amazonSearch.includes('kubb') ||
                            item.amazonSearch.includes('beer pong') ||
                            item.amazonSearch.includes('string lights') ||
                            item.amazonSearch.includes('tarp')
                          );
                          
                          const seasoningItems = enabledAmazonItems.filter(item => 
                            item.amazonSearch.includes('seasoning') || 
                            item.amazonSearch.includes('concentrate') || 
                            item.amazonSearch.includes('bay leaves')
                          );
                          
                          const sauceItems = enabledAmazonItems.filter(item => 
                            item.amazonSearch.includes('sauce') || 
                            item.amazonSearch.includes('butter')
                          );
                          
                          const partySuppliesItems = enabledAmazonItems.filter(item => 
                            item.amazonSearch.includes('paper plates') ||
                            item.amazonSearch.includes('plastic utensils') ||
                            item.amazonSearch.includes('napkins') ||
                            item.amazonSearch.includes('wet wipes') ||
                            item.amazonSearch.includes('paper towels') ||
                            item.amazonSearch.includes('dipping cups') ||
                            item.amazonSearch.includes('disposable cups') ||
                            item.amazonSearch.includes('takeout containers') ||
                            item.amazonSearch.includes('butcher paper')
                          );
                          
                          const safetyCleanupItems = enabledAmazonItems.filter(item => 
                            item.amazonSearch.includes('first aid') || 
                            item.amazonSearch.includes('trash') || 
                            item.amazonSearch.includes('bug') || 
                            item.amazonSearch.includes('sunscreen') || 
                            item.amazonSearch.includes('sanitizer') ||
                            item.amazonSearch.includes('citronella') ||
                            item.amazonSearch.includes('cleaning') ||
                            item.amazonSearch.includes('bleach') ||
                            item.amazonSearch.includes('scrub') ||
                            item.amazonSearch.includes('recycling') ||
                            item.amazonSearch.includes('waste bucket')
                          );
                          
                          const sections = [];
                          
                          if (equipmentItems.length > 0) {
                            sections.push(React.createElement('div', { className: "mb-6", key: "equipment" },
                              React.createElement('h3', { className: "font-semibold text-md mg-gradient-text mb-3" }, "Equipment & Tools"),
                              React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-3" },
                                equipmentItems.map((item, index) => 
                                  React.createElement('a', {
                                    key: index,
                                    href: generateAmazonLink(item.amazonSearch),
                                    target: "_blank",
                                    rel: "noopener noreferrer",
                                    className: "bg-white/5 p-3 rounded-lg hover:bg-white/10 transition-colors border border-white/10 hover:border-orange-500/30"
                                  },
                                    React.createElement('div', { className: "font-medium text-white" }, item.name),
                                    React.createElement('div', { className: "text-sm text-gray-400" }, `${formatQuantity(item.qty, item.unit)} ${item.unit} needed`)
                                  )
                                )
                              )
                            ));
                          }
                          
                          if (seasoningItems.length > 0) {
                            sections.push(React.createElement('div', { className: "mb-6", key: "seasonings" },
                              React.createElement('h3', { className: "font-semibold text-md mg-gradient-text mb-3" }, "Seasonings & Flavor"),
                              React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-3" },
                                seasoningItems.map((item, index) => 
                                  React.createElement('a', {
                                    key: index,
                                    href: generateAmazonLink(item.amazonSearch),
                                    target: "_blank",
                                    rel: "noopener noreferrer",
                                    className: "bg-white/5 p-3 rounded-lg hover:bg-white/10 transition-colors border border-white/10 hover:border-orange-500/30"
                                  },
                                    React.createElement('div', { className: "font-medium text-white" }, item.name),
                                    React.createElement('div', { className: "text-sm text-gray-400" }, `${formatQuantity(item.qty, item.unit)} ${item.unit} needed`)
                                  )
                                )
                              )
                            ));
                          }
                          
                          if (sauceItems.length > 0) {
                            sections.push(React.createElement('div', { className: "mb-6", key: "sauces" },
                              React.createElement('h3', { className: "font-semibold text-md mg-gradient-text mb-3" }, "Sauces & Condiments"),
                              React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-3" },
                                sauceItems.map((item, index) => 
                                  React.createElement('a', {
                                    key: index,
                                    href: generateAmazonLink(item.amazonSearch),
                                    target: "_blank",
                                    rel: "noopener noreferrer",
                                    className: "bg-white/5 p-3 rounded-lg hover:bg-white/10 transition-colors border border-white/10 hover:border-orange-500/30"
                                  },
                                    React.createElement('div', { className: "font-medium text-white" }, item.name),
                                    React.createElement('div', { className: "text-sm text-gray-400" }, `${formatQuantity(item.qty, item.unit)} ${item.unit} needed`)
                                  )
                                )
                              )
                            ));
                          }
                          
                          if (partySuppliesItems.length > 0) {
                            sections.push(React.createElement('div', { className: "mb-6", key: "party-supplies" },
                              React.createElement('h3', { className: "font-semibold text-md mg-gradient-text mb-3" }, "Party Supplies"),
                              React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-3" },
                                partySuppliesItems.map((item, index) => 
                                  React.createElement('a', {
                                    key: index,
                                    href: generateAmazonLink(item.amazonSearch),
                                    target: "_blank",
                                    rel: "noopener noreferrer",
                                    className: "bg-white/5 p-3 rounded-lg hover:bg-white/10 transition-colors border border-white/10 hover:border-orange-500/30"
                                  },
                                    React.createElement('div', { className: "font-medium text-white" }, item.name),
                                    React.createElement('div', { className: "text-sm text-gray-400" }, `${formatQuantity(item.qty, item.unit)} ${item.unit} needed`)
                                  )
                                )
                              )
                            ));
                          }

                          if (safetyCleanupItems.length > 0) {
                            sections.push(React.createElement('div', { className: "mb-4", key: "safety-cleanup" },
                              React.createElement('h3', { className: "font-semibold text-md mg-gradient-text mb-3" }, "Safety & Cleanup"),
                              React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-3" },
                                safetyCleanupItems.map((item, index) => 
                                  React.createElement('a', {
                                    key: index,
                                    href: generateAmazonLink(item.amazonSearch),
                                    target: "_blank",
                                    rel: "noopener noreferrer",
                                    className: "bg-white/5 p-3 rounded-lg hover:bg-white/10 transition-colors border border-white/10 hover:border-orange-500/30"
                                  },
                                    React.createElement('div', { className: "font-medium text-white" }, item.name),
                                    React.createElement('div', { className: "text-sm text-gray-400" }, `${formatQuantity(item.qty, item.unit)} ${item.unit} needed`)
                                  )
                                )
                              )
                            ));
                          }
                          
                          return sections;
                        })(),
                      
                      // Amazon affiliate disclosure
                      React.createElement('div', { className: "mt-4 p-3 text-xs bg-gray-800/50 rounded-lg border border-gray-700" },
                        React.createElement('p', { className: "text-gray-400" },
                          "As an Amazon Associate, we earn from qualifying purchases. This helps support the calculator at no extra cost to you. Prices are estimates - always check Amazon for current pricing."
                        )
                      )
                      )
                    ),
                    
                    // Music Section
                    React.createElement('div', { className: "mt-6 border-t border-white/10 pt-4" },
                      React.createElement('button', {
                        onClick: () => setMusicSectionExpanded(!musicSectionExpanded),
                        className: "flex items-center justify-between w-full hover:bg-white/5 p-3 rounded transition-colors min-h-[44px]"
                      },
                        React.createElement('h2', { className: "font-display text-lg sm:text-xl md:text-2xl mg-gradient-text" }, "🎵 Set the Mood"),
                        React.createElement('span', { className: "text-lg" }, musicSectionExpanded ? '▼' : '▶')
                      ),
                      musicSectionExpanded && React.createElement('div', { className: "mt-4" },
                        React.createElement('p', { className: "text-gray-300 text-sm mb-4" },
                          "Get your crawfish boil party started with authentic Louisiana zydeco and Cajun music!"
                        ),
                        React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-3" },
                          Object.values(musicLinks).map((platform, index) =>
                            React.createElement('a', {
                              key: index,
                              href: platform.url,
                              target: '_blank',
                              rel: 'noopener noreferrer',
                              className: "flex items-center gap-3 p-3 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 transition-colors min-h-[44px]"
                            },
                              React.createElement('span', { className: "text-2xl" }, platform.icon),
                              React.createElement('div', {},
                                React.createElement('div', { className: "font-semibold text-white" }, platform.name),
                                React.createElement('div', { className: "text-xs text-gray-400" }, "Search: Zydeco & Cajun")
                              )
                            )
                          )
                        )
                      )
                    ),
                    
                    // Modern Export Dropdown
                    React.createElement('div', { className: "relative mt-4" },
                      React.createElement('button', {
                        onClick: () => setShowExportMenu(!showExportMenu),
                        className: "mg-btn-enhanced w-full px-4 py-3 rounded-xl transition-all text-sm font-semibold min-h-[44px] flex items-center justify-center gap-2",
                        style: {
                          background: `linear-gradient(135deg, rgba(255, 255, 255, 0.85), var(--spice))`,
                          color: 'var(--theme-bg, #0b0b0b)',
                          border: `1px solid rgba(255, 68, 0, 0.6)`,
                          boxShadow: `0 0 8px rgba(255, 68, 0, 0.4)`
                        }
                      }, 
                        "📤 Export & Share",
                        React.createElement('span', { className: `transition-transform ${showExportMenu ? 'rotate-180' : ''}` }, "▼")
                      ),
                      
                      // Export dropdown menu
                      showExportMenu && React.createElement('div', {
                        className: "absolute top-full left-0 right-0 mt-2 rounded-xl overflow-hidden z-10",
                        style: { 
                          background: 'var(--theme-accent, rgba(255,255,255,0.05))',
                          border: '1px solid var(--theme-border, rgba(255,255,255,0.1))',
                          boxShadow: '0 0 10px rgba(255, 68, 0, 0.35), 0 8px 32px rgba(0,0,0,0.3)',
                          backdropFilter: 'blur(10px)'
                        }
                      },
                        // Copy to Clipboard
                        React.createElement('button', {
                          onClick: () => {
                            exportAsText();
                            setShowExportMenu(false);
                          },
                          className: "w-full px-4 py-3 text-left transition-colors flex items-center gap-3 text-sm",
                          style: {
                            background: 'transparent',
                            color: 'var(--theme-text, #f5f5f5)',
                            border: 'none',
                            cursor: 'pointer'
                          },
                          onMouseEnter: (e) => {
                            e.target.style.background = 'rgba(255, 68, 0, 0.2)';
                            e.target.style.boxShadow = '0 0 8px rgba(255, 68, 0, 0.25)';
                          },
                          onMouseLeave: (e) => {
                            e.target.style.background = 'transparent';
                            e.target.style.boxShadow = 'none';
                          }
                        },
                          React.createElement('span', { className: "text-lg" }, "📋"),
                          React.createElement('div', {},
                            React.createElement('div', { className: "font-medium mg-label" }, "Copy to Clipboard"),
                            React.createElement('div', { className: "text-xs", style: { color: 'var(--theme-text-secondary, #bbb)' } }, "Copy as formatted text")
                          )
                        ),
                        
                        // Download as CSV
                        React.createElement('button', {
                          onClick: () => {
                            exportAsCSV();
                            setShowExportMenu(false);
                          },
                          className: "w-full px-4 py-3 text-left transition-colors flex items-center gap-3 text-sm",
                          style: {
                            background: 'transparent',
                            color: 'var(--theme-text, #f5f5f5)',
                            border: 'none',
                            borderTop: '1px solid var(--theme-border, rgba(255,255,255,0.1))',
                            cursor: 'pointer'
                          },
                          onMouseEnter: (e) => {
                            e.target.style.background = 'rgba(255, 68, 0, 0.2)';
                            e.target.style.boxShadow = '0 0 8px rgba(255, 68, 0, 0.25)';
                          },
                          onMouseLeave: (e) => {
                            e.target.style.background = 'transparent';
                            e.target.style.boxShadow = 'none';
                          }
                        },
                          React.createElement('span', { className: "text-lg" }, "📊"),
                          React.createElement('div', {},
                            React.createElement('div', { className: "font-medium mg-label" }, "Download CSV"),
                            React.createElement('div', { className: "text-xs", style: { color: 'var(--theme-text-secondary, #bbb)' } }, "Spreadsheet format")
                          )
                        ),
                        
                        // Download as JSON
                        React.createElement('button', {
                          onClick: () => {
                            exportAsJSON();
                            setShowExportMenu(false);
                          },
                          className: "w-full px-4 py-3 text-left transition-colors flex items-center gap-3 text-sm",
                          style: {
                            background: 'transparent',
                            color: 'var(--theme-text, #f5f5f5)',
                            border: 'none',
                            borderTop: '1px solid var(--theme-border, rgba(255,255,255,0.1))',
                            cursor: 'pointer'
                          },
                          onMouseEnter: (e) => {
                            e.target.style.background = 'rgba(255, 68, 0, 0.2)';
                            e.target.style.boxShadow = '0 0 8px rgba(255, 68, 0, 0.25)';
                          },
                          onMouseLeave: (e) => {
                            e.target.style.background = 'transparent';
                            e.target.style.boxShadow = 'none';
                          }
                        },
                          React.createElement('span', { className: "text-lg" }, "📄"),
                          React.createElement('div', {},
                            React.createElement('div', { className: "font-medium mg-label" }, "Download JSON"),
                            React.createElement('div', { className: "text-xs", style: { color: 'var(--theme-text-secondary, #bbb)' } }, "Structured data format")
                          )
                        ),
                        
                        // Share (Web Share API)
                        React.createElement('button', {
                          onClick: () => {
                            shareList();
                            setShowExportMenu(false);
                          },
                          className: "w-full px-4 py-3 text-left transition-colors flex items-center gap-3 text-sm",
                          style: {
                            background: 'transparent',
                            color: 'var(--theme-text, #f5f5f5)',
                            border: 'none',
                            borderTop: '1px solid var(--theme-border, rgba(255,255,255,0.1))',
                            cursor: 'pointer'
                          },
                          onMouseEnter: (e) => {
                            e.target.style.background = 'rgba(255, 68, 0, 0.2)';
                            e.target.style.boxShadow = '0 0 8px rgba(255, 68, 0, 0.25)';
                          },
                          onMouseLeave: (e) => {
                            e.target.style.background = 'transparent';
                            e.target.style.boxShadow = 'none';
                          }
                        },
                          React.createElement('span', { className: "text-lg" }, "📱"),
                          React.createElement('div', {},
                            React.createElement('div', { className: "font-medium mg-label" }, "Share"),
                            React.createElement('div', { className: "text-xs", style: { color: 'var(--theme-text-secondary, #bbb)' } }, "Send to others")
                          )
                        ),
                        
                        // Print
                        React.createElement('button', {
                          onClick: () => {
                            printShoppingList();
                            setShowExportMenu(false);
                          },
                          className: "w-full px-4 py-3 text-left transition-colors flex items-center gap-3 text-sm",
                          style: {
                            background: 'transparent',
                            color: 'var(--theme-text, #f5f5f5)',
                            border: 'none',
                            borderTop: '1px solid var(--theme-border, rgba(255,255,255,0.1))',
                            cursor: 'pointer'
                          },
                          onMouseEnter: (e) => {
                            e.target.style.background = 'rgba(255, 68, 0, 0.2)';
                            e.target.style.boxShadow = '0 0 8px rgba(255, 68, 0, 0.25)';
                          },
                          onMouseLeave: (e) => {
                            e.target.style.background = 'transparent';
                            e.target.style.boxShadow = 'none';
                          }
                        },
                          React.createElement('span', { className: "text-lg" }, "🖨️"),
                          React.createElement('div', {},
                            React.createElement('div', { className: "font-medium mg-label" }, "Print"),
                            React.createElement('div', { className: "text-xs", style: { color: 'var(--theme-text-secondary, #bbb)' } }, "Professional layout")
                          )
                        )
                      )
                    ),
                    
                    // Season Disclaimer
                    React.createElement('div', { 
                      className: "text-center mt-4 text-xs text-gray-400 italic" 
                    }, "* Prices vary by season and location")
                  ),


                  )
                )
              )
            )
          );
        }

        // Render the app using React 18 createRoot API
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(CrawfishBoilCalculator));

        // Run tests
        (function runTests() {
          const approx = (a, b, eps = 1e-6) => Math.abs(a - b) < eps;

          // Test 1: baseline values scale correctly
          const { items: t1, total: tot1 } = buildToupsBoilItems({ peopleCount: 10, lbsPerPerson: 3, location: 'louisiana' });
          const c1 = t1.find(x => x.name === 'Crawfish');
          const corn1 = t1.find(x => x.name === 'Corn');
          console.assert(approx(c1.qty, 30), 'T1 Crawfish should be 30 lbs');
          console.assert(approx(corn1.qty, 30 * 0.267 * 0.5), 'T1 Corn should follow weight-based ratio');
          console.assert(tot1 > 0, 'T1 total should be positive');

          // Test 2: string inputs are coerced to numbers
          const { items: t2 } = buildToupsBoilItems({ peopleCount: '8', lbsPerPerson: '2.5', location: 'texas' });
          const c2 = t2.find(x => x.name === 'Crawfish');
          console.assert(approx(c2.qty, 30), 'T2 Crawfish should be 30 lbs (minimum) with string inputs');

          // Test 3: fallback location (unknown -> louisiana)
          const { items: t3 } = buildToupsBoilItems({ peopleCount: 4, lbsPerPerson: 3, location: 'unknown' });
          const c3 = t3.find(x => x.name === 'Crawfish');
          console.assert(approx(c3.qty, 30), 'T3 fallback to louisiana quantities (30 lb minimum)');

          // Test 4: minimums applied (onions>=0.5 lbs, salt>=1 lb, bottles>=0.5)
          const { items: t4 } = buildToupsBoilItems({ peopleCount: 1, lbsPerPerson: 1, location: 'louisiana' });
          const onions = t4.find(x => x.name === 'Yellow Onions');
          const salt = t4.find(x => x.name === 'Salt');
          const lemonJuice = t4.find(x => x.name === 'Lemon Juice');
          console.assert(onions.qty >= 0.5, 'T4 onions minimum applied (0.5 lbs)');
          console.assert(salt.qty >= 1, 'T4 salt minimum applied');
          console.assert(lemonJuice.qty >= 0.5, 'T4 lemon juice minimum bottle applied');

          // Test 5: spice color mapping — ensure known keys resolve
          const colors = [SPICE_COLORS[1], SPICE_COLORS[2], SPICE_COLORS[3], SPICE_COLORS[4], SPICE_COLORS[5]];
          console.assert(colors.every(Boolean), 'T5 spice color map should have all 5 levels for dark theme');

          console.log('[CrawfishBoilCalculator] tests passed');
        })();
    </script>
</body>
</html>
